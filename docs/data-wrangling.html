<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Data wrangling | Data Analysis and Visualization in R (IN2339)</title>
  <meta name="description" content="TODO This book introduces concepts and skills that can help you tackle real-world data analysis challenges. It covers concepts from probability, statistical inference, linear regression and machine learning and helps you develop skills such as R programming, data wrangling with dplyr, data visualization with ggplot2, file organization with UNIX/Linux shell, version control with GitHub, and reproducible document preparation with R markdown." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Data wrangling | Data Analysis and Visualization in R (IN2339)" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="TODO This book introduces concepts and skills that can help you tackle real-world data analysis challenges. It covers concepts from probability, statistical inference, linear regression and machine learning and helps you develop skills such as R programming, data wrangling with dplyr, data visualization with ggplot2, file organization with UNIX/Linux shell, version control with GitHub, and reproducible document preparation with R markdown." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Data wrangling | Data Analysis and Visualization in R (IN2339)" />
  
  <meta name="twitter:description" content="TODO This book introduces concepts and skills that can help you tackle real-world data analysis challenges. It covers concepts from probability, statistical inference, linear regression and machine learning and helps you develop skills such as R programming, data wrangling with dplyr, data visualization with ggplot2, file organization with UNIX/Linux shell, version control with GitHub, and reproducible document preparation with R markdown." />
  



<meta name="date" content="2021-11-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-basics.html"/>
<link rel="next" href="tidy-data-and-combining-tables.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Analysis and Visualization in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html"><i class="fa fa-check"></i>Acknowledgments</a></li>
<li class="chapter" data-level="" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="feedback.html"><a href="feedback.html"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#data-science-what-and-why"><i class="fa fa-check"></i>Data Science: What and why?</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#what-you-will-learn-and-not-learn"><i class="fa fa-check"></i>What you will learn and not learn</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#the-r-language"><i class="fa fa-check"></i>The R language</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#course-overview"><i class="fa fa-check"></i>Course overview</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#complementary-reading"><i class="fa fa-check"></i>Complementary reading</a></li>
</ul></li>
<li class="part"><span><b>I Get</b></span></li>
<li class="chapter" data-level="1" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>1</b> R basics</a>
<ul>
<li class="chapter" data-level="1.1" data-path="r-basics.html"><a href="r-basics.html#rstudio"><i class="fa fa-check"></i><b>1.1</b> Rstudio</a></li>
<li class="chapter" data-level="1.2" data-path="r-basics.html"><a href="r-basics.html#first-steps-with-r"><i class="fa fa-check"></i><b>1.2</b> First steps with R</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="r-basics.html"><a href="r-basics.html#objects"><i class="fa fa-check"></i><b>1.2.1</b> Objects</a></li>
<li class="chapter" data-level="1.2.2" data-path="r-basics.html"><a href="r-basics.html#the-workspace"><i class="fa fa-check"></i><b>1.2.2</b> The workspace</a></li>
<li class="chapter" data-level="1.2.3" data-path="r-basics.html"><a href="r-basics.html#functions"><i class="fa fa-check"></i><b>1.2.3</b> Functions</a></li>
<li class="chapter" data-level="1.2.4" data-path="r-basics.html"><a href="r-basics.html#other-prebuilt-objects"><i class="fa fa-check"></i><b>1.2.4</b> Other prebuilt objects</a></li>
<li class="chapter" data-level="1.2.5" data-path="r-basics.html"><a href="r-basics.html#variable-names"><i class="fa fa-check"></i><b>1.2.5</b> Variable names</a></li>
<li class="chapter" data-level="1.2.6" data-path="r-basics.html"><a href="r-basics.html#reusing-scripts"><i class="fa fa-check"></i><b>1.2.6</b> Reusing scripts</a></li>
<li class="chapter" data-level="1.2.7" data-path="r-basics.html"><a href="r-basics.html#commenting-your-code"><i class="fa fa-check"></i><b>1.2.7</b> Commenting your code</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="r-basics.html"><a href="r-basics.html#data-types"><i class="fa fa-check"></i><b>1.3</b> Data types</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="r-basics.html"><a href="r-basics.html#data-frames"><i class="fa fa-check"></i><b>1.3.1</b> Data frames</a></li>
<li class="chapter" data-level="1.3.2" data-path="r-basics.html"><a href="r-basics.html#examining-an-object"><i class="fa fa-check"></i><b>1.3.2</b> Examining an object</a></li>
<li class="chapter" data-level="1.3.3" data-path="r-basics.html"><a href="r-basics.html#the-accessor"><i class="fa fa-check"></i><b>1.3.3</b> The accessor: <code>$</code></a></li>
<li class="chapter" data-level="1.3.4" data-path="r-basics.html"><a href="r-basics.html#vectors-numerics-characters-and-logical"><i class="fa fa-check"></i><b>1.3.4</b> Vectors: numerics, characters, and logical</a></li>
<li class="chapter" data-level="1.3.5" data-path="r-basics.html"><a href="r-basics.html#factors"><i class="fa fa-check"></i><b>1.3.5</b> Factors</a></li>
<li class="chapter" data-level="1.3.6" data-path="r-basics.html"><a href="r-basics.html#lists"><i class="fa fa-check"></i><b>1.3.6</b> Lists</a></li>
<li class="chapter" data-level="1.3.7" data-path="r-basics.html"><a href="r-basics.html#matrices"><i class="fa fa-check"></i><b>1.3.7</b> Matrices</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="r-basics.html"><a href="r-basics.html#vectors"><i class="fa fa-check"></i><b>1.4</b> Vectors</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="r-basics.html"><a href="r-basics.html#creating-vectors"><i class="fa fa-check"></i><b>1.4.1</b> Creating vectors</a></li>
<li class="chapter" data-level="1.4.2" data-path="r-basics.html"><a href="r-basics.html#names"><i class="fa fa-check"></i><b>1.4.2</b> Names</a></li>
<li class="chapter" data-level="1.4.3" data-path="r-basics.html"><a href="r-basics.html#sequences"><i class="fa fa-check"></i><b>1.4.3</b> Sequences</a></li>
<li class="chapter" data-level="1.4.4" data-path="r-basics.html"><a href="r-basics.html#subsetting"><i class="fa fa-check"></i><b>1.4.4</b> Subsetting</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="r-basics.html"><a href="r-basics.html#coercion"><i class="fa fa-check"></i><b>1.5</b> Coercion</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="r-basics.html"><a href="r-basics.html#not-availables-na"><i class="fa fa-check"></i><b>1.5.1</b> Not availables (NA)</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="r-basics.html"><a href="r-basics.html#sorting"><i class="fa fa-check"></i><b>1.6</b> Sorting</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="r-basics.html"><a href="r-basics.html#sort"><i class="fa fa-check"></i><b>1.6.1</b> <code>sort</code></a></li>
<li class="chapter" data-level="1.6.2" data-path="r-basics.html"><a href="r-basics.html#order"><i class="fa fa-check"></i><b>1.6.2</b> <code>order</code></a></li>
<li class="chapter" data-level="1.6.3" data-path="r-basics.html"><a href="r-basics.html#max-and-which.max"><i class="fa fa-check"></i><b>1.6.3</b> <code>max</code> and <code>which.max</code></a></li>
<li class="chapter" data-level="1.6.4" data-path="r-basics.html"><a href="r-basics.html#rank"><i class="fa fa-check"></i><b>1.6.4</b> <code>rank</code></a></li>
<li class="chapter" data-level="1.6.5" data-path="r-basics.html"><a href="r-basics.html#beware-of-recycling"><i class="fa fa-check"></i><b>1.6.5</b> Beware of recycling</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="r-basics.html"><a href="r-basics.html#vector-arithmetics"><i class="fa fa-check"></i><b>1.7</b> Vector arithmetics</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="r-basics.html"><a href="r-basics.html#rescaling-a-vector"><i class="fa fa-check"></i><b>1.7.1</b> Rescaling a vector</a></li>
<li class="chapter" data-level="1.7.2" data-path="r-basics.html"><a href="r-basics.html#two-vectors"><i class="fa fa-check"></i><b>1.7.2</b> Two vectors</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="r-basics.html"><a href="r-basics.html#indexing"><i class="fa fa-check"></i><b>1.8</b> Indexing</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="r-basics.html"><a href="r-basics.html#subsetting-with-logicals"><i class="fa fa-check"></i><b>1.8.1</b> Subsetting with logicals</a></li>
<li class="chapter" data-level="1.8.2" data-path="r-basics.html"><a href="r-basics.html#logical-operators"><i class="fa fa-check"></i><b>1.8.2</b> Logical operators</a></li>
<li class="chapter" data-level="1.8.3" data-path="r-basics.html"><a href="r-basics.html#which"><i class="fa fa-check"></i><b>1.8.3</b> <code>which</code></a></li>
<li class="chapter" data-level="1.8.4" data-path="r-basics.html"><a href="r-basics.html#match"><i class="fa fa-check"></i><b>1.8.4</b> <code>match</code></a></li>
<li class="chapter" data-level="1.8.5" data-path="r-basics.html"><a href="r-basics.html#in"><i class="fa fa-check"></i><b>1.8.5</b> <code>%in%</code></a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="r-basics.html"><a href="r-basics.html#r-programming"><i class="fa fa-check"></i><b>1.9</b> R programming</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>2</b> Data wrangling</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-wrangling.html"><a href="data-wrangling.html#data.tables"><i class="fa fa-check"></i><b>2.1</b> Data.tables</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-wrangling.html"><a href="data-wrangling.html#overview"><i class="fa fa-check"></i><b>2.1.1</b> Overview</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-wrangling.html"><a href="data-wrangling.html#creating-and-loading-tables"><i class="fa fa-check"></i><b>2.1.2</b> Creating and loading tables</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-wrangling.html"><a href="data-wrangling.html#inspecting-tables"><i class="fa fa-check"></i><b>2.1.3</b> Inspecting tables</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-wrangling.html"><a href="data-wrangling.html#row-subsetting"><i class="fa fa-check"></i><b>2.2</b> Row subsetting</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-wrangling.html"><a href="data-wrangling.html#subsetting-rows-by-indices"><i class="fa fa-check"></i><b>2.2.1</b> Subsetting rows by indices</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-wrangling.html"><a href="data-wrangling.html#subsetting-rows-by-logical-conditions"><i class="fa fa-check"></i><b>2.2.2</b> Subsetting rows by logical conditions</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-wrangling.html"><a href="data-wrangling.html#column-operations"><i class="fa fa-check"></i><b>2.3</b> Column operations</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data-wrangling.html"><a href="data-wrangling.html#working-with-columns"><i class="fa fa-check"></i><b>2.3.1</b> Working with columns</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-wrangling.html"><a href="data-wrangling.html#column-operations-1"><i class="fa fa-check"></i><b>2.3.2</b> Column operations</a></li>
<li class="chapter" data-level="2.3.3" data-path="data-wrangling.html"><a href="data-wrangling.html#advanced-commands-apply-over-columns"><i class="fa fa-check"></i><b>2.3.3</b> Advanced commands: *apply() over columns</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-wrangling.html"><a href="data-wrangling.html#the-by-option"><i class="fa fa-check"></i><b>2.4</b> The ‘by’ option</a></li>
<li class="chapter" data-level="2.5" data-path="data-wrangling.html"><a href="data-wrangling.html#counting-occurences-with-.n"><i class="fa fa-check"></i><b>2.5</b> Counting occurences with <code>.N</code></a></li>
<li class="chapter" data-level="2.6" data-path="data-wrangling.html"><a href="data-wrangling.html#extending-tables"><i class="fa fa-check"></i><b>2.6</b> Extending tables</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="data-wrangling.html"><a href="data-wrangling.html#creating-new-columns-the-command"><i class="fa fa-check"></i><b>2.6.1</b> Creating new columns (the := command)</a></li>
<li class="chapter" data-level="2.6.2" data-path="data-wrangling.html"><a href="data-wrangling.html#advanced-multiple-assignments"><i class="fa fa-check"></i><b>2.6.2</b> Advanced: Multiple assignments</a></li>
<li class="chapter" data-level="2.6.3" data-path="data-wrangling.html"><a href="data-wrangling.html#copying-tables"><i class="fa fa-check"></i><b>2.6.3</b> Copying tables</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="data-wrangling.html"><a href="data-wrangling.html#summary"><i class="fa fa-check"></i><b>2.7</b> Summary</a></li>
<li class="chapter" data-level="2.8" data-path="data-wrangling.html"><a href="data-wrangling.html#data.table-resources"><i class="fa fa-check"></i><b>2.8</b> Data.table resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html"><i class="fa fa-check"></i><b>3</b> Tidy data and combining tables</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#motivation"><i class="fa fa-check"></i><b>3.1.1</b> Motivation</a></li>
<li class="chapter" data-level="3.1.2" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#datasets-used-in-this-chapter"><i class="fa fa-check"></i><b>3.1.2</b> Datasets used in this chapter</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#tidy-and-untidy-data"><i class="fa fa-check"></i><b>3.2</b> Tidy and untidy data</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#definition-of-tidy-data"><i class="fa fa-check"></i><b>3.2.1</b> Definition of tidy data</a></li>
<li class="chapter" data-level="3.2.2" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#advantages-of-tidy-data"><i class="fa fa-check"></i><b>3.2.2</b> Advantages of tidy data</a></li>
<li class="chapter" data-level="3.2.3" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#common-signs-of-untidy-datasets"><i class="fa fa-check"></i><b>3.2.3</b> Common signs of untidy datasets</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#tidying-up-datasets"><i class="fa fa-check"></i><b>3.3</b> Tidying up datasets</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#melting-wide-to-long"><i class="fa fa-check"></i><b>3.3.1</b> Melting (wide to long)</a></li>
<li class="chapter" data-level="3.3.2" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#casting-long-to-wide"><i class="fa fa-check"></i><b>3.3.2</b> Casting (long to wide)</a></li>
<li class="chapter" data-level="3.3.3" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#separating-columns"><i class="fa fa-check"></i><b>3.3.3</b> Separating columns</a></li>
<li class="chapter" data-level="3.3.4" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#uniting-columns"><i class="fa fa-check"></i><b>3.3.4</b> Uniting columns</a></li>
<li class="chapter" data-level="3.3.5" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#advanced-columns-containing-sets-of-values"><i class="fa fa-check"></i><b>3.3.5</b> Advanced: Columns containing sets of values</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#concatenating-tables"><i class="fa fa-check"></i><b>3.4</b> Concatenating tables</a></li>
<li class="chapter" data-level="3.5" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#merging-tables"><i class="fa fa-check"></i><b>3.5</b> Merging tables</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#inner-merge"><i class="fa fa-check"></i><b>3.5.1</b> Inner merge</a></li>
<li class="chapter" data-level="3.5.2" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#outer-full-merge"><i class="fa fa-check"></i><b>3.5.2</b> Outer (full) merge</a></li>
<li class="chapter" data-level="3.5.3" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#left-merge"><i class="fa fa-check"></i><b>3.5.3</b> Left merge</a></li>
<li class="chapter" data-level="3.5.4" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#right-merge"><i class="fa fa-check"></i><b>3.5.4</b> Right merge</a></li>
<li class="chapter" data-level="3.5.5" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#merging-by-several-columns"><i class="fa fa-check"></i><b>3.5.5</b> Merging by several columns</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#tidy-not-unique"><i class="fa fa-check"></i><b>3.6</b> Tidy representations are not unique</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#alternative-tidy-forms-of-a-table"><i class="fa fa-check"></i><b>3.6.1</b> Alternative tidy forms of a table</a></li>
<li class="chapter" data-level="3.6.2" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#on-multiple-types-of-observational-units-in-the-same-table"><i class="fa fa-check"></i><b>3.6.2</b> On multiple types of observational units in the same table</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#summary-1"><i class="fa fa-check"></i><b>3.7</b> Summary</a></li>
<li class="chapter" data-level="3.8" data-path="tidy-data-and-combining-tables.html"><a href="tidy-data-and-combining-tables.html#tidy-data-resources"><i class="fa fa-check"></i><b>3.8</b> Tidy data resources</a></li>
</ul></li>
<li class="part"><span><b>II Look</b></span></li>
<li class="chapter" data-level="4" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html"><i class="fa fa-check"></i><b>4</b> Low dimensional visualizations</a>
<ul>
<li class="chapter" data-level="4.1" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#why-plotting"><i class="fa fa-check"></i><b>4.1</b> Why plotting?</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#plot-vs-stat"><i class="fa fa-check"></i><b>4.1.1</b> Plotting versus summary statistics</a></li>
<li class="chapter" data-level="4.1.2" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#plot-debug"><i class="fa fa-check"></i><b>4.1.2</b> Plotting helps finding bugs in the data</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#grammar-of-graphics"><i class="fa fa-check"></i><b>4.2</b> Grammar of graphics</a></li>
<li class="chapter" data-level="4.3" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#components-of-the-layered-grammar"><i class="fa fa-check"></i><b>4.3</b> Components of the layered grammar</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#components-of-the-grammar-of-graphics"><i class="fa fa-check"></i><b>4.3.1</b> Components of the grammar of graphics</a></li>
<li class="chapter" data-level="4.3.2" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#defining-the-data-and-layers"><i class="fa fa-check"></i><b>4.3.2</b> Defining the data and layers</a></li>
<li class="chapter" data-level="4.3.3" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#mapping-of-aesthetics"><i class="fa fa-check"></i><b>4.3.3</b> Mapping of aesthetics</a></li>
<li class="chapter" data-level="4.3.4" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#facets-axes-and-labels"><i class="fa fa-check"></i><b>4.3.4</b> Facets, axes and labels</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#different-types-of-one--and-two-dimensional-plots"><i class="fa fa-check"></i><b>4.4</b> Different types of one- and two-dimensional plots</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#plots-for-one-single-continuous-variable"><i class="fa fa-check"></i><b>4.4.1</b> Plots for one single continuous variable</a></li>
<li class="chapter" data-level="4.4.2" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#plots-for-two-variables-one-continuous-one-discrete"><i class="fa fa-check"></i><b>4.4.2</b> Plots for two variables: one continuous, one discrete</a></li>
<li class="chapter" data-level="4.4.3" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#plots-for-two-continuos-variables"><i class="fa fa-check"></i><b>4.4.3</b> Plots for two continuos variables</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#further-plots-for-low-dimensional-data"><i class="fa fa-check"></i><b>4.5</b> Further plots for low dimensional data</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#plot-matrix"><i class="fa fa-check"></i><b>4.5.1</b> Plot matrix</a></li>
<li class="chapter" data-level="4.5.2" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#correlation-plot"><i class="fa fa-check"></i><b>4.5.2</b> Correlation plot</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#summary-2"><i class="fa fa-check"></i><b>4.6</b> Summary</a></li>
<li class="chapter" data-level="4.7" data-path="low-dimensional-visualizations.html"><a href="low-dimensional-visualizations.html#resources"><i class="fa fa-check"></i><b>4.7</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html"><i class="fa fa-check"></i><b>5</b> High dimensional visualizations</a>
<ul>
<li class="chapter" data-level="5.1" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#notations"><i class="fa fa-check"></i><b>5.1</b> Notations</a></li>
<li class="chapter" data-level="5.2" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#data-matrix-preparation"><i class="fa fa-check"></i><b>5.2</b> Data matrix preparation</a></li>
<li class="chapter" data-level="5.3" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#heatmaps"><i class="fa fa-check"></i><b>5.3</b> Heatmaps</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#centering-and-scaling-variables"><i class="fa fa-check"></i><b>5.3.1</b> Centering and scaling variables</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#clustering"><i class="fa fa-check"></i><b>5.4</b> Clustering</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#k-means-clustering"><i class="fa fa-check"></i><b>5.4.1</b> K-Means clustering</a></li>
<li class="chapter" data-level="5.4.2" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#hclust"><i class="fa fa-check"></i><b>5.4.2</b> Hierarchical clustering</a></li>
<li class="chapter" data-level="5.4.3" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#comparing-clusterings-with-the-rand-index"><i class="fa fa-check"></i><b>5.4.3</b> Comparing clusterings with the Rand index</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#dimensionality-reduction-with-pca"><i class="fa fa-check"></i><b>5.5</b> Dimensionality reduction with PCA</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#a-minimal-pca-from-2d-to-1d"><i class="fa fa-check"></i><b>5.5.1</b> A minimal PCA: From 2D to 1D</a></li>
<li class="chapter" data-level="5.5.2" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#pca-in-higher-dimensions"><i class="fa fa-check"></i><b>5.5.2</b> PCA in higher dimensions</a></li>
<li class="chapter" data-level="5.5.3" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#pca-in-r"><i class="fa fa-check"></i><b>5.5.3</b> PCA in R</a></li>
<li class="chapter" data-level="5.5.4" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#plotting-pca-results-in-r"><i class="fa fa-check"></i><b>5.5.4</b> Plotting PCA results in R</a></li>
<li class="chapter" data-level="5.5.5" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#pca-summary"><i class="fa fa-check"></i><b>5.5.5</b> PCA summary</a></li>
<li class="chapter" data-level="5.5.6" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#nonlinear-dimension-reduction"><i class="fa fa-check"></i><b>5.5.6</b> Nonlinear dimension reduction</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#discussion"><i class="fa fa-check"></i><b>5.6</b> Discussion</a></li>
<li class="chapter" data-level="5.7" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#summary-3"><i class="fa fa-check"></i><b>5.7</b> Summary</a></li>
<li class="chapter" data-level="5.8" data-path="high-dimensional-visualizations.html"><a href="high-dimensional-visualizations.html#resources-1"><i class="fa fa-check"></i><b>5.8</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html"><i class="fa fa-check"></i><b>6</b> Graphically supported hypotheses</a>
<ul>
<li class="chapter" data-level="6.1" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#descriptive-vs.-associative-plots"><i class="fa fa-check"></i><b>6.1</b> Descriptive vs. associative plots</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#descriptive-plots"><i class="fa fa-check"></i><b>6.1.1</b> Descriptive plots</a></li>
<li class="chapter" data-level="6.1.2" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#associative-plots"><i class="fa fa-check"></i><b>6.1.2</b> Associative plots</a></li>
<li class="chapter" data-level="6.1.3" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#correctly-using-descriptive-and-demonstrative-plots"><i class="fa fa-check"></i><b>6.1.3</b> Correctly using descriptive and demonstrative plots</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#correlation-and-causation"><i class="fa fa-check"></i><b>6.2</b> Correlation and causation</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#the-association-is-not-statistically-supported"><i class="fa fa-check"></i><b>6.2.1</b> The association is not statistically supported</a></li>
<li class="chapter" data-level="6.2.2" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#reversing-cause-and-effect"><i class="fa fa-check"></i><b>6.2.2</b> Reversing cause and effect</a></li>
<li class="chapter" data-level="6.2.3" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#the-association-is-induced-by-a-third-variable"><i class="fa fa-check"></i><b>6.2.3</b> The association is induced by a third variable</a></li>
<li class="chapter" data-level="6.2.4" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#simpsons-paradox"><i class="fa fa-check"></i><b>6.2.4</b> Simpson’s paradox</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#data-presentation-as-story-telling"><i class="fa fa-check"></i><b>6.3</b> Data presentation as story telling</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#what-is-a-story"><i class="fa fa-check"></i><b>6.3.1</b> What is a story?</a></li>
<li class="chapter" data-level="6.3.2" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#presentation-structure"><i class="fa fa-check"></i><b>6.3.2</b> Presentation structure</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#guidelines-for-coloring-in-data-visualization"><i class="fa fa-check"></i><b>6.4</b> Guidelines for coloring in data visualization</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#color-coding-in-r"><i class="fa fa-check"></i><b>6.4.1</b> Color coding in R</a></li>
<li class="chapter" data-level="6.4.2" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#general-rules-for-color-coding"><i class="fa fa-check"></i><b>6.4.2</b> General rules for color coding</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#general-dos-and-donts-in-data-visualization"><i class="fa fa-check"></i><b>6.5</b> General do’s and don’ts in data visualization</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#dos"><i class="fa fa-check"></i><b>6.5.1</b> Do’s</a></li>
<li class="chapter" data-level="6.5.2" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#donts"><i class="fa fa-check"></i><b>6.5.2</b> don’ts</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#summary-4"><i class="fa fa-check"></i><b>6.6</b> Summary</a></li>
<li class="chapter" data-level="6.7" data-path="graph-supported-hypos.html"><a href="graph-supported-hypos.html#resources-2"><i class="fa fa-check"></i><b>6.7</b> Resources</a></li>
</ul></li>
<li class="part"><span><b>III Conclude</b></span></li>
<li class="chapter" data-level="7" data-path="resampling-stat.html"><a href="resampling-stat.html"><i class="fa fa-check"></i><b>7</b> Resampling-based Statistical Assessment</a>
<ul>
<li class="chapter" data-level="7.1" data-path="resampling-stat.html"><a href="resampling-stat.html#yeast-dataset"><i class="fa fa-check"></i><b>7.1</b> The yeast dataset</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="resampling-stat.html"><a href="resampling-stat.html#the-experiment"><i class="fa fa-check"></i><b>7.1.1</b> The experiment</a></li>
<li class="chapter" data-level="7.1.2" data-path="resampling-stat.html"><a href="resampling-stat.html#genotype"><i class="fa fa-check"></i><b>7.1.2</b> Genotype</a></li>
<li class="chapter" data-level="7.1.3" data-path="resampling-stat.html"><a href="resampling-stat.html#growth-rates"><i class="fa fa-check"></i><b>7.1.3</b> Growth rates</a></li>
<li class="chapter" data-level="7.1.4" data-path="resampling-stat.html"><a href="resampling-stat.html#genotype-growth-rate-association-in-maltose-at-a-specific-marker"><i class="fa fa-check"></i><b>7.1.4</b> Genotype-growth rate association in maltose at a specific marker</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="resampling-stat.html"><a href="resampling-stat.html#statistical-hypothesis-testing"><i class="fa fa-check"></i><b>7.2</b> Statistical hypothesis testing</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="resampling-stat.html"><a href="resampling-stat.html#permut-test-build-up"><i class="fa fa-check"></i><b>7.2.1</b> Permutation testing: An intuitive build-up</a></li>
<li class="chapter" data-level="7.2.2" data-path="resampling-stat.html"><a href="resampling-stat.html#concepts-of-statistical-hypothesis-testing"><i class="fa fa-check"></i><b>7.2.2</b> Concepts of Statistical Hypothesis Testing</a></li>
<li class="chapter" data-level="7.2.3" data-path="resampling-stat.html"><a href="resampling-stat.html#permutation-testing-formally"><i class="fa fa-check"></i><b>7.2.3</b> Permutation testing, formally</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="resampling-stat.html"><a href="resampling-stat.html#confidence-intervals-quantifying-uncertainty-in-parameter-estimates"><i class="fa fa-check"></i><b>7.3</b> Confidence intervals: Quantifying uncertainty in parameter estimates</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="resampling-stat.html"><a href="resampling-stat.html#repeating-experiments-to-quantify-uncertainty"><i class="fa fa-check"></i><b>7.3.1</b> Repeating experiments to quantify uncertainty</a></li>
<li class="chapter" data-level="7.3.2" data-path="resampling-stat.html"><a href="resampling-stat.html#simulating-repeated-experiments"><i class="fa fa-check"></i><b>7.3.2</b> Simulating repeated experiments</a></li>
<li class="chapter" data-level="7.3.3" data-path="resampling-stat.html"><a href="resampling-stat.html#quantifying-uncertainty-using-the-case-resampling-bootstrap"><i class="fa fa-check"></i><b>7.3.3</b> Quantifying uncertainty using the case resampling bootstrap</a></li>
<li class="chapter" data-level="7.3.4" data-path="resampling-stat.html"><a href="resampling-stat.html#confidence-intervals-formal-definition"><i class="fa fa-check"></i><b>7.3.4</b> Confidence Intervals: Formal definition</a></li>
<li class="chapter" data-level="7.3.5" data-path="resampling-stat.html"><a href="resampling-stat.html#visualizing-the-formal-definition-of-confidence-intervals"><i class="fa fa-check"></i><b>7.3.5</b> Visualizing the formal definition of Confidence Intervals</a></li>
<li class="chapter" data-level="7.3.6" data-path="resampling-stat.html"><a href="resampling-stat.html#hypothesis-testing-with-the-confidence-interval"><i class="fa fa-check"></i><b>7.3.6</b> Hypothesis testing with the Confidence Interval</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="resampling-stat.html"><a href="resampling-stat.html#discussion-1"><i class="fa fa-check"></i><b>7.4</b> Discussion</a></li>
<li class="chapter" data-level="7.5" data-path="resampling-stat.html"><a href="resampling-stat.html#conclusion"><i class="fa fa-check"></i><b>7.5</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="analytical-stat.html"><a href="analytical-stat.html"><i class="fa fa-check"></i><b>8</b> Analytical Statistical Assessment</a>
<ul>
<li class="chapter" data-level="8.1" data-path="analytical-stat.html"><a href="analytical-stat.html#motivation-hypothesis-testing-in-large-datasets"><i class="fa fa-check"></i><b>8.1</b> Motivation: Hypothesis testing in large datasets</a></li>
<li class="chapter" data-level="8.2" data-path="analytical-stat.html"><a href="analytical-stat.html#the-binomial-test-testing-hypotheses-for-a-single-binary-variable"><i class="fa fa-check"></i><b>8.2</b> The Binomial Test: testing hypotheses for a single binary variable</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="analytical-stat.html"><a href="analytical-stat.html#abstraction-tossing-a-coin"><i class="fa fa-check"></i><b>8.2.1</b> Abstraction: Tossing a coin</a></li>
<li class="chapter" data-level="8.2.2" data-path="analytical-stat.html"><a href="analytical-stat.html#computing-a-binomial-test-with-r"><i class="fa fa-check"></i><b>8.2.2</b> Computing a binomial test with R</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="analytical-stat.html"><a href="analytical-stat.html#fisher-test"><i class="fa fa-check"></i><b>8.3</b> Fisher’s exact test: Testing the association between two binary variables</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="analytical-stat.html"><a href="analytical-stat.html#permutation-testing-and-the-hypergeometric-distribution"><i class="fa fa-check"></i><b>8.3.1</b> Permutation testing and the hypergeometric distribution</a></li>
<li class="chapter" data-level="8.3.2" data-path="analytical-stat.html"><a href="analytical-stat.html#fishers-exact-test"><i class="fa fa-check"></i><b>8.3.2</b> Fisher’s exact test</a></li>
<li class="chapter" data-level="8.3.3" data-path="analytical-stat.html"><a href="analytical-stat.html#fishers-exact-test-in-r"><i class="fa fa-check"></i><b>8.3.3</b> Fisher’s exact test in R</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="analytical-stat.html"><a href="analytical-stat.html#testing-the-association-between-one-quantitative-and-one-binary-variable"><i class="fa fa-check"></i><b>8.4</b> Testing the association between one quantitative and one binary variable</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="analytical-stat.html"><a href="analytical-stat.html#the-t-test"><i class="fa fa-check"></i><b>8.4.1</b> The t-test</a></li>
<li class="chapter" data-level="8.4.2" data-path="analytical-stat.html"><a href="analytical-stat.html#wilcoxon-rank-sum-test-an-alternative-to-the-t-test-for-non-gaussian-data"><i class="fa fa-check"></i><b>8.4.2</b> Wilcoxon rank-sum test: An alternative to the t-test for non-Gaussian data</a></li>
<li class="chapter" data-level="8.4.3" data-path="analytical-stat.html"><a href="analytical-stat.html#why-bother-with-the-wilcoxon-rank-sum-test"><i class="fa fa-check"></i><b>8.4.3</b> Why bother with the Wilcoxon rank-sum test?</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="analytical-stat.html"><a href="analytical-stat.html#association-between-two-quantitative-variables"><i class="fa fa-check"></i><b>8.5</b> Association between two quantitative variables</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="analytical-stat.html"><a href="analytical-stat.html#the-pearson-correlation-test"><i class="fa fa-check"></i><b>8.5.1</b> The Pearson correlation test</a></li>
<li class="chapter" data-level="8.5.2" data-path="analytical-stat.html"><a href="analytical-stat.html#the-spearman-rank-correlation-test"><i class="fa fa-check"></i><b>8.5.2</b> The Spearman rank correlation test</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="analytical-stat.html"><a href="analytical-stat.html#testing-associations-of-two-variables-overview"><i class="fa fa-check"></i><b>8.6</b> Testing associations of two variables: Overview</a></li>
<li class="chapter" data-level="8.7" data-path="analytical-stat.html"><a href="analytical-stat.html#assessing-distributional-assumptions-with-q-q-plots"><i class="fa fa-check"></i><b>8.7</b> Assessing distributional assumptions with Q-Q Plots</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="analytical-stat.html"><a href="analytical-stat.html#limitations-of-histograms"><i class="fa fa-check"></i><b>8.7.1</b> Limitations of Histograms</a></li>
<li class="chapter" data-level="8.7.2" data-path="analytical-stat.html"><a href="analytical-stat.html#q-q-plots-comparing-empirical-to-theoretical-quantiles"><i class="fa fa-check"></i><b>8.7.2</b> Q-Q plots: Comparing empirical to theoretical quantiles</a></li>
<li class="chapter" data-level="8.7.3" data-path="analytical-stat.html"><a href="analytical-stat.html#typical-q-q-plots"><i class="fa fa-check"></i><b>8.7.3</b> Typical Q-Q plots</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="analytical-stat.html"><a href="analytical-stat.html#analytical-conf-int"><i class="fa fa-check"></i><b>8.8</b> Analytical Confidence intervals</a>
<ul>
<li class="chapter" data-level="8.8.1" data-path="analytical-stat.html"><a href="analytical-stat.html#binomial-case"><i class="fa fa-check"></i><b>8.8.1</b> Binomial case</a></li>
<li class="chapter" data-level="8.8.2" data-path="analytical-stat.html"><a href="analytical-stat.html#confidence-intervals-in-r"><i class="fa fa-check"></i><b>8.8.2</b> Confidence intervals in R</a></li>
<li class="chapter" data-level="8.8.3" data-path="analytical-stat.html"><a href="analytical-stat.html#advanced-a-note-on-overlapping-confidence-intervals"><i class="fa fa-check"></i><b>8.8.3</b> Advanced: A note on overlapping confidence intervals</a></li>
</ul></li>
<li class="chapter" data-level="8.9" data-path="analytical-stat.html"><a href="analytical-stat.html#discussion-2"><i class="fa fa-check"></i><b>8.9</b> Discussion</a></li>
<li class="chapter" data-level="8.10" data-path="analytical-stat.html"><a href="analytical-stat.html#conclusion-1"><i class="fa fa-check"></i><b>8.10</b> Conclusion</a></li>
<li class="chapter" data-level="8.11" data-path="analytical-stat.html"><a href="analytical-stat.html#resources-3"><i class="fa fa-check"></i><b>8.11</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="big-data-stat.html"><a href="big-data-stat.html"><i class="fa fa-check"></i><b>9</b> Statistical Assessments for Big Data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="big-data-stat.html"><a href="big-data-stat.html#motivation-statistical-significance-in-a-big-data-context"><i class="fa fa-check"></i><b>9.1</b> Motivation: Statistical Significance in a Big Data context</a></li>
<li class="chapter" data-level="9.2" data-path="big-data-stat.html"><a href="big-data-stat.html#effect-size-actually-important-or-just-significant"><i class="fa fa-check"></i><b>9.2</b> Effect Size: Actually important or just significant?</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="big-data-stat.html"><a href="big-data-stat.html#the-relationship-of-sample-size-and-significance"><i class="fa fa-check"></i><b>9.2.1</b> The relationship of sample size and significance</a></li>
<li class="chapter" data-level="9.2.2" data-path="big-data-stat.html"><a href="big-data-stat.html#report-p-value-effect-size-and-plot"><i class="fa fa-check"></i><b>9.2.2</b> Report P-value, effect size, and plot</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="big-data-stat.html"><a href="big-data-stat.html#multiple-testing"><i class="fa fa-check"></i><b>9.3</b> Multiple Testing</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="big-data-stat.html"><a href="big-data-stat.html#multiple-testing-in-real-life-p-hacking-and-fishing-expeditions"><i class="fa fa-check"></i><b>9.3.1</b> Multiple testing in real life: p-Hacking and fishing expeditions</a></li>
<li class="chapter" data-level="9.3.2" data-path="big-data-stat.html"><a href="big-data-stat.html#the-land-of-counterfeit-fake-coins"><i class="fa fa-check"></i><b>9.3.2</b> The Land of Counterfeit (fake) coins</a></li>
<li class="chapter" data-level="9.3.3" data-path="big-data-stat.html"><a href="big-data-stat.html#simulation"><i class="fa fa-check"></i><b>9.3.3</b> Simulation</a></li>
<li class="chapter" data-level="9.3.4" data-path="big-data-stat.html"><a href="big-data-stat.html#nominal-p-values"><i class="fa fa-check"></i><b>9.3.4</b> Nominal p-values</a></li>
<li class="chapter" data-level="9.3.5" data-path="big-data-stat.html"><a href="big-data-stat.html#family-wise-error-rate"><i class="fa fa-check"></i><b>9.3.5</b> Family-wise error rate</a></li>
<li class="chapter" data-level="9.3.6" data-path="big-data-stat.html"><a href="big-data-stat.html#false-discovery-rate"><i class="fa fa-check"></i><b>9.3.6</b> False Discovery Rate</a></li>
<li class="chapter" data-level="9.3.7" data-path="big-data-stat.html"><a href="big-data-stat.html#overview-figure"><i class="fa fa-check"></i><b>9.3.7</b> Overview figure</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="big-data-stat.html"><a href="big-data-stat.html#conclusions"><i class="fa fa-check"></i><b>9.4</b> Conclusions</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="big-data-stat.html"><a href="big-data-stat.html#to-remember"><i class="fa fa-check"></i><b>9.4.1</b> To remember</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="big-data-stat.html"><a href="big-data-stat.html#references"><i class="fa fa-check"></i><b>9.5</b> References</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html"><i class="fa fa-check"></i><b>10</b> Linear Regression</a>
<ul>
<li class="chapter" data-level="10.1" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#motivation-and-overview"><i class="fa fa-check"></i><b>10.1</b> Motivation and overview</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#testing-conditional-dependence"><i class="fa fa-check"></i><b>10.1.1</b> Testing conditional dependence</a></li>
<li class="chapter" data-level="10.1.2" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#linear-regression"><i class="fa fa-check"></i><b>10.1.2</b> Linear regression</a></li>
<li class="chapter" data-level="10.1.3" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#limitations"><i class="fa fa-check"></i><b>10.1.3</b> Limitations</a></li>
<li class="chapter" data-level="10.1.4" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#applications"><i class="fa fa-check"></i><b>10.1.4</b> Applications</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#univariate-regression"><i class="fa fa-check"></i><b>10.2</b> Univariate regression</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#galtons-height-dataset"><i class="fa fa-check"></i><b>10.2.1</b> Galton’s height dataset</a></li>
<li class="chapter" data-level="10.2.2" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#ML-LSE"><i class="fa fa-check"></i><b>10.2.2</b> Maximum likelihood and least squares estimates</a></li>
<li class="chapter" data-level="10.2.3" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#interpretation-of-the-fitted-coefficients"><i class="fa fa-check"></i><b>10.2.3</b> Interpretation of the fitted coefficients</a></li>
<li class="chapter" data-level="10.2.4" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#predicted-values-are-random-variables"><i class="fa fa-check"></i><b>10.2.4</b> Predicted values are random variables</a></li>
<li class="chapter" data-level="10.2.5" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#explained-variance"><i class="fa fa-check"></i><b>10.2.5</b> Explained variance</a></li>
<li class="chapter" data-level="10.2.6" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#testing-the-relationship-between-y-and-x"><i class="fa fa-check"></i><b>10.2.6</b> Testing the relationship between <span class="math inline">\(y\)</span> and <span class="math inline">\(x\)</span></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#multivariate-regression"><i class="fa fa-check"></i><b>10.3</b> Multivariate regression</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#a-multivariate-example-the-baseball-dataset"><i class="fa fa-check"></i><b>10.3.1</b> A multivariate example: The baseball dataset</a></li>
<li class="chapter" data-level="10.3.2" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#fitting-multivariate-regression"><i class="fa fa-check"></i><b>10.3.2</b> Fitting multivariate regression</a></li>
<li class="chapter" data-level="10.3.3" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#testing-sets-of-parameters"><i class="fa fa-check"></i><b>10.3.3</b> Testing sets of parameters</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#lin-reg-diagnostic"><i class="fa fa-check"></i><b>10.4</b> Diagnostic plots</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#assessing-non-linearity-with-residual-plot"><i class="fa fa-check"></i><b>10.4.1</b> Assessing non-linearity with residual plot</a></li>
<li class="chapter" data-level="10.4.2" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#when-error-variance-is-not-constant-heteroscedascity"><i class="fa fa-check"></i><b>10.4.2</b> When error variance is not constant: Heteroscedascity</a></li>
<li class="chapter" data-level="10.4.3" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#gaussianity-q-q-plot-of-the-residuals"><i class="fa fa-check"></i><b>10.4.3</b> Gaussianity: Q-Q-plot of the residuals</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="chap-lin-reg.html"><a href="chap-lin-reg.html#conclusions-1"><i class="fa fa-check"></i><b>10.5</b> Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="chap-log-reg.html"><a href="chap-log-reg.html"><i class="fa fa-check"></i><b>11</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="11.1" data-path="chap-log-reg.html"><a href="chap-log-reg.html#a-univariate-example-predicting-sex-given-the-height"><i class="fa fa-check"></i><b>11.1</b> A univariate example: predicting sex given the height</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="chap-log-reg.html"><a href="chap-log-reg.html#from-linear-regression-to-logistic-regression"><i class="fa fa-check"></i><b>11.1.1</b> From linear regression to logistic regression</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="chap-log-reg.html"><a href="chap-log-reg.html#ML-CE"><i class="fa fa-check"></i><b>11.2</b> Maximum likelihood estimates and the cross-entropy criterion</a></li>
<li class="chapter" data-level="11.3" data-path="chap-log-reg.html"><a href="chap-log-reg.html#logistic-regression-as-a-generalized-linear-model"><i class="fa fa-check"></i><b>11.3</b> Logistic regression as a generalized linear model</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="chap-log-reg.html"><a href="chap-log-reg.html#logistic-regression-with-r"><i class="fa fa-check"></i><b>11.3.1</b> Logistic regression with R</a></li>
<li class="chapter" data-level="11.3.2" data-path="chap-log-reg.html"><a href="chap-log-reg.html#overview-plot-of-the-univariate-example"><i class="fa fa-check"></i><b>11.3.2</b> Overview plot of the univariate example</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="chap-log-reg.html"><a href="chap-log-reg.html#interpreting-a-logistic-regression-fit"><i class="fa fa-check"></i><b>11.4</b> Interpreting a logistic regression fit</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="chap-log-reg.html"><a href="chap-log-reg.html#predicted-odds"><i class="fa fa-check"></i><b>11.4.1</b> Predicted odds</a></li>
<li class="chapter" data-level="11.4.2" data-path="chap-log-reg.html"><a href="chap-log-reg.html#coefficients-of-the-logistic-regression"><i class="fa fa-check"></i><b>11.4.2</b> Coefficients of the logistic regression</a></li>
<li class="chapter" data-level="11.4.3" data-path="chap-log-reg.html"><a href="chap-log-reg.html#effects-on-probabilities"><i class="fa fa-check"></i><b>11.4.3</b> Effects on probabilities</a></li>
<li class="chapter" data-level="11.4.4" data-path="chap-log-reg.html"><a href="chap-log-reg.html#class-imbalance"><i class="fa fa-check"></i><b>11.4.4</b> Class imbalance</a></li>
<li class="chapter" data-level="11.4.5" data-path="chap-log-reg.html"><a href="chap-log-reg.html#multiple-logistic-regression"><i class="fa fa-check"></i><b>11.4.5</b> Multiple Logistic regression</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="chap-log-reg.html"><a href="chap-log-reg.html#assessing-the-performance-of-a-classifier"><i class="fa fa-check"></i><b>11.5</b> Assessing the performance of a classifier</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="chap-log-reg.html"><a href="chap-log-reg.html#classification-with-logistic-regression"><i class="fa fa-check"></i><b>11.5.1</b> Classification with logistic regression</a></li>
<li class="chapter" data-level="11.5.2" data-path="chap-log-reg.html"><a href="chap-log-reg.html#confusion-matrix"><i class="fa fa-check"></i><b>11.5.2</b> Confusion Matrix</a></li>
<li class="chapter" data-level="11.5.3" data-path="chap-log-reg.html"><a href="chap-log-reg.html#classification-performance-metrics"><i class="fa fa-check"></i><b>11.5.3</b> Classification performance metrics</a></li>
<li class="chapter" data-level="11.5.4" data-path="chap-log-reg.html"><a href="chap-log-reg.html#choosing-a-classification-cutoff"><i class="fa fa-check"></i><b>11.5.4</b> Choosing a classification cutoff</a></li>
<li class="chapter" data-level="11.5.5" data-path="chap-log-reg.html"><a href="chap-log-reg.html#roc-curve"><i class="fa fa-check"></i><b>11.5.5</b> ROC curve</a></li>
<li class="chapter" data-level="11.5.6" data-path="chap-log-reg.html"><a href="chap-log-reg.html#precision-recall-curve"><i class="fa fa-check"></i><b>11.5.6</b> Precision Recall curve</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="chap-log-reg.html"><a href="chap-log-reg.html#conclusions-2"><i class="fa fa-check"></i><b>11.6</b> Conclusions</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="chap-log-reg.html"><a href="chap-log-reg.html#to-remember-1"><i class="fa fa-check"></i><b>11.6.1</b> To remember</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="supervised-learning.html"><a href="supervised-learning.html"><i class="fa fa-check"></i><b>12</b> Supervised Learning</a>
<ul>
<li class="chapter" data-level="12.1" data-path="supervised-learning.html"><a href="supervised-learning.html#introduction-3"><i class="fa fa-check"></i><b>12.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="supervised-learning.html"><a href="supervised-learning.html#motivation-2"><i class="fa fa-check"></i><b>12.1.1</b> Motivation</a></li>
<li class="chapter" data-level="12.1.2" data-path="supervised-learning.html"><a href="supervised-learning.html#supervised-learning-vs.-unsupervised-learning"><i class="fa fa-check"></i><b>12.1.2</b> Supervised learning vs. unsupervised learning</a></li>
<li class="chapter" data-level="12.1.3" data-path="supervised-learning.html"><a href="supervised-learning.html#notation"><i class="fa fa-check"></i><b>12.1.3</b> Notation</a></li>
<li class="chapter" data-level="12.1.4" data-path="supervised-learning.html"><a href="supervised-learning.html#basic-approach-in-supervised-machine-learning"><i class="fa fa-check"></i><b>12.1.4</b> Basic approach in supervised machine learning</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="supervised-learning.html"><a href="supervised-learning.html#over--and-under-fitting"><i class="fa fa-check"></i><b>12.2</b> Over- and Under-fitting</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="supervised-learning.html"><a href="supervised-learning.html#example-polynomial-curve-fitting"><i class="fa fa-check"></i><b>12.2.1</b> Example: polynomial curve fitting</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="supervised-learning.html"><a href="supervised-learning.html#splitting-the-dataset-for-performance-assessment"><i class="fa fa-check"></i><b>12.3</b> Splitting the dataset for performance assessment</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="supervised-learning.html"><a href="supervised-learning.html#over-fitting-to-the-training-dataset"><i class="fa fa-check"></i><b>12.3.1</b> Over-fitting to the training dataset</a></li>
<li class="chapter" data-level="12.3.2" data-path="supervised-learning.html"><a href="supervised-learning.html#cross-validation"><i class="fa fa-check"></i><b>12.3.2</b> Cross-validation</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="supervised-learning.html"><a href="supervised-learning.html#random-forests-as-alternative-models"><i class="fa fa-check"></i><b>12.4</b> Random Forests as alternative models</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="supervised-learning.html"><a href="supervised-learning.html#the-basics-of-decision-trees"><i class="fa fa-check"></i><b>12.4.1</b> The basics of decision trees</a></li>
<li class="chapter" data-level="12.4.2" data-path="supervised-learning.html"><a href="supervised-learning.html#random-forests-for-classification-and-regression-tasks"><i class="fa fa-check"></i><b>12.4.2</b> Random Forests for classification and regression tasks</a></li>
<li class="chapter" data-level="12.4.3" data-path="supervised-learning.html"><a href="supervised-learning.html#random-forests-in-r"><i class="fa fa-check"></i><b>12.4.3</b> Random Forests in R</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="supervised-learning.html"><a href="supervised-learning.html#conclusion-2"><i class="fa fa-check"></i><b>12.5</b> Conclusion</a></li>
<li class="chapter" data-level="12.6" data-path="supervised-learning.html"><a href="supervised-learning.html#resources-4"><i class="fa fa-check"></i><b>12.6</b> Resources</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>A</b> Importing data</a>
<ul>
<li class="chapter" data-level="A.1" data-path="importing-data.html"><a href="importing-data.html#paths-and-the-working-directory"><i class="fa fa-check"></i><b>A.1</b> Paths and the working directory</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="importing-data.html"><a href="importing-data.html#the-filesystem"><i class="fa fa-check"></i><b>A.1.1</b> The filesystem</a></li>
<li class="chapter" data-level="A.1.2" data-path="importing-data.html"><a href="importing-data.html#relative-and-full-paths"><i class="fa fa-check"></i><b>A.1.2</b> Relative and full paths</a></li>
<li class="chapter" data-level="A.1.3" data-path="importing-data.html"><a href="importing-data.html#the-working-directory"><i class="fa fa-check"></i><b>A.1.3</b> The working directory</a></li>
<li class="chapter" data-level="A.1.4" data-path="importing-data.html"><a href="importing-data.html#generating-path-names"><i class="fa fa-check"></i><b>A.1.4</b> Generating path names</a></li>
<li class="chapter" data-level="A.1.5" data-path="importing-data.html"><a href="importing-data.html#copying-files-using-paths"><i class="fa fa-check"></i><b>A.1.5</b> Copying files using paths</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="importing-data.html"><a href="importing-data.html#the-readr-and-readxl-packages"><i class="fa fa-check"></i><b>A.2</b> The readr and readxl packages</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="importing-data.html"><a href="importing-data.html#readr"><i class="fa fa-check"></i><b>A.2.1</b> readr</a></li>
<li class="chapter" data-level="A.2.2" data-path="importing-data.html"><a href="importing-data.html#readxl"><i class="fa fa-check"></i><b>A.2.2</b> readxl</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="importing-data.html"><a href="importing-data.html#exercises"><i class="fa fa-check"></i><b>A.3</b> Exercises</a></li>
<li class="chapter" data-level="A.4" data-path="importing-data.html"><a href="importing-data.html#downloading-files"><i class="fa fa-check"></i><b>A.4</b> Downloading files</a></li>
<li class="chapter" data-level="A.5" data-path="importing-data.html"><a href="importing-data.html#r-base-importing-functions"><i class="fa fa-check"></i><b>A.5</b> R-base importing functions</a>
<ul>
<li><a href="importing-data.html#scan"><code>scan</code></a></li>
</ul></li>
<li class="chapter" data-level="A.6" data-path="importing-data.html"><a href="importing-data.html#text-versus-binary-files"><i class="fa fa-check"></i><b>A.6</b> Text versus binary files</a></li>
<li class="chapter" data-level="A.7" data-path="importing-data.html"><a href="importing-data.html#unicode-versus-ascii"><i class="fa fa-check"></i><b>A.7</b> Unicode versus ASCII</a></li>
<li class="chapter" data-level="A.8" data-path="importing-data.html"><a href="importing-data.html#organizing-data-with-spreadsheets"><i class="fa fa-check"></i><b>A.8</b> Organizing data with spreadsheets</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="appendix-r-programming.html"><a href="appendix-r-programming.html"><i class="fa fa-check"></i><b>B</b> R programming</a>
<ul>
<li class="chapter" data-level="B.1" data-path="appendix-r-programming.html"><a href="appendix-r-programming.html#conditionals"><i class="fa fa-check"></i><b>B.1</b> Conditional expressions</a></li>
<li class="chapter" data-level="B.2" data-path="appendix-r-programming.html"><a href="appendix-r-programming.html#defining-functions"><i class="fa fa-check"></i><b>B.2</b> Defining functions</a></li>
<li class="chapter" data-level="B.3" data-path="appendix-r-programming.html"><a href="appendix-r-programming.html#namespaces"><i class="fa fa-check"></i><b>B.3</b> Namespaces</a></li>
<li class="chapter" data-level="B.4" data-path="appendix-r-programming.html"><a href="appendix-r-programming.html#for-loops"><i class="fa fa-check"></i><b>B.4</b> For-loops</a></li>
<li class="chapter" data-level="B.5" data-path="appendix-r-programming.html"><a href="appendix-r-programming.html#vectorization"><i class="fa fa-check"></i><b>B.5</b> Vectorization and functionals</a></li>
<li class="chapter" data-level="B.6" data-path="appendix-r-programming.html"><a href="appendix-r-programming.html#r-markdown"><i class="fa fa-check"></i><b>B.6</b> R Markdown</a></li>
<li class="chapter" data-level="B.7" data-path="appendix-r-programming.html"><a href="appendix-r-programming.html#resources-5"><i class="fa fa-check"></i><b>B.7</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="additonal-plotting-tools.html"><a href="additonal-plotting-tools.html"><i class="fa fa-check"></i><b>C</b> Additonal plotting tools</a>
<ul>
<li class="chapter" data-level="C.1" data-path="additonal-plotting-tools.html"><a href="additonal-plotting-tools.html#plotting-themes"><i class="fa fa-check"></i><b>C.1</b> Plotting themes</a></li>
<li class="chapter" data-level="C.2" data-path="additonal-plotting-tools.html"><a href="additonal-plotting-tools.html#axes"><i class="fa fa-check"></i><b>C.2</b> Axes</a>
<ul>
<li class="chapter" data-level="C.2.1" data-path="additonal-plotting-tools.html"><a href="additonal-plotting-tools.html#axis-elements"><i class="fa fa-check"></i><b>C.2.1</b> Axis elements</a></li>
</ul></li>
<li class="chapter" data-level="C.3" data-path="additonal-plotting-tools.html"><a href="additonal-plotting-tools.html#plot-title"><i class="fa fa-check"></i><b>C.3</b> Plot title</a></li>
<li class="chapter" data-level="C.4" data-path="additonal-plotting-tools.html"><a href="additonal-plotting-tools.html#legend"><i class="fa fa-check"></i><b>C.4</b> Legend</a></li>
<li class="chapter" data-level="C.5" data-path="additonal-plotting-tools.html"><a href="additonal-plotting-tools.html#interactive-plots"><i class="fa fa-check"></i><b>C.5</b> Interactive plots</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="appendix-probabilities.html"><a href="appendix-probabilities.html"><i class="fa fa-check"></i><b>D</b> Probabilities</a>
<ul>
<li class="chapter" data-level="D.1" data-path="appendix-probabilities.html"><a href="appendix-probabilities.html#probability-conditional-probability-and-dependence"><i class="fa fa-check"></i><b>D.1</b> Probability, conditional probability, and dependence</a></li>
<li class="chapter" data-level="D.2" data-path="appendix-probabilities.html"><a href="appendix-probabilities.html#expected-value-variance-and-covariance"><i class="fa fa-check"></i><b>D.2</b> Expected value, variance, and covariance</a></li>
<li class="chapter" data-level="D.3" data-path="appendix-probabilities.html"><a href="appendix-probabilities.html#sample-estimates"><i class="fa fa-check"></i><b>D.3</b> Sample estimates</a></li>
<li class="chapter" data-level="D.4" data-path="appendix-probabilities.html"><a href="appendix-probabilities.html#appendix-lin-reg"><i class="fa fa-check"></i><b>D.4</b> Linear regression</a></li>
<li class="chapter" data-level="D.5" data-path="appendix-probabilities.html"><a href="appendix-probabilities.html#resources-6"><i class="fa fa-check"></i><b>D.5</b> Resources</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="./">Julien Gagneur, TUM</a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis and Visualization in R (IN2339)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-wrangling" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Data wrangling</h1>
<p>Data wrangling refers to the task of processing raw data into useful formats.
This Chapter introduces basic data wrangling operations in R using <code>data.tables</code>.</p>
<div id="data.tables" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Data.tables</h2>
<div id="overview" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Overview</h3>
<p><code>data.table</code> objects are a modern implementation of tables containing variables stored in columns and observations stored in rows. Base R provides a similar structure called <code>data.frame</code>. However, we will exclusively use <code>data.table</code> in this course because <code>data.frame</code> objects are a lot slower and often a little more complicated to use.</p>
<p>A <code>data.table</code> is a memory efficient and faster implementation of <code>data.frame</code>. It is more efficient because it operates on its columns by reference. In contrast modifying a <code>data.frame</code> leads R to copy the entire <code>data.frame</code>.</p>
<p>Like a <code>data.frame</code>, each column can have a different type. Unlike a <code>data.frame</code>, it doesn’t have row names. It accepts all <code>data.frame</code> functions to ensure compatibility, but it has a shorter and more flexible syntax. This may be not so straightforward in the beginning but pays off and saves time on two fronts:</p>
<ul>
<li>programming (easier to code, read, debug and maintain)</li>
<li>computing (fast and memory efficient)</li>
</ul>
<p>The general basic form of the data.table syntax is:</p>
<pre><code>DT[ i,  j,  by ] #
    |   |   |
    |   |    -------&gt; grouped by what?
    |    -------&gt; what to do with the columns?
     ---&gt; on which rows?
     </code></pre>
<p>The way to read this out loud is: “Take <code>DT</code>, subset rows by <code>i</code>, then compute <code>j</code> grouped by <code>by</code>.”</p>
<p>We will now describe some basic usage examples expanding on this definition. First of all, let us create and inspect some <code>data.tables</code> to get a first impression.</p>
</div>
<div id="creating-and-loading-tables" class="section level3" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Creating and loading tables</h3>
<p>To create a <code>data.table</code>, we just name its columns and populate them. All the columns have to have the same length. If vectors of different lengths are provided upon creation of a <code>data.table</code>, R automatically recycles the values of the shorter vectors. Here is an example:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="data-wrangling.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;data.table&quot;)</span></span>
<span id="cb216-2"><a href="data-wrangling.html#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb216-3"><a href="data-wrangling.html#cb216-3" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">x =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>), <span class="at">each =</span> <span class="dv">3</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">6</span>), <span class="at">v =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>)</span>
<span id="cb216-4"><a href="data-wrangling.html#cb216-4" aria-hidden="true" tabindex="-1"></a>DT <span class="co"># note how column y was recycled</span></span></code></pre></div>
<pre><code>##    x y v
## 1: a 1 1
## 2: a 3 2
## 3: a 6 3
## 4: b 1 4
## 5: b 3 5
## 6: b 6 6
## 7: c 1 7
## 8: c 3 8
## 9: c 6 9</code></pre>
<p>If we want to convert any other R object to a <code>data.table</code>, all we have to do is to call the <code>as.data.table()</code> function. This is typically done for <code>data.frame</code> objects.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="data-wrangling.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This way we can for example convert any built-in dataset</span></span>
<span id="cb218-2"><a href="data-wrangling.html#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="co"># coming as a data.frame into a data.table:</span></span>
<span id="cb218-3"><a href="data-wrangling.html#cb218-3" aria-hidden="true" tabindex="-1"></a>titanic_dt <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(Titanic)</span>
<span id="cb218-4"><a href="data-wrangling.html#cb218-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(titanic_dt)</span></code></pre></div>
<pre><code>## [1] &quot;data.table&quot; &quot;data.frame&quot;</code></pre>
<p>Here you can see that the class function informs us that <code>titanic_dt</code> is both a <code>data.table</code> and a <code>data.frame</code> as <code>data.table</code> inherits
from <code>data.frame</code>.</p>
<p>Alternatively, we can read files from disk and process them using <code>data.table</code>. The easiest way to do so is to use the function <code>fread()</code>. Here is an example using a subset of the Kaggle flight and airports dataset that is limited to flights going in or to the Los Angeles airport. We refer to the description Kaggle flights and airports challenge for more details [<a href="https://www.kaggle.com/tylerx/flights-and-airports-data" class="uri">https://www.kaggle.com/tylerx/flights-and-airports-data</a>].</p>
<p>To run the following code, save the comma-separated value file <code>flightsLAX.csv</code> into a local folder of your choice and replace the string <code>"path_to_file"</code> with the actual path to your <code>flightsLAX.csv</code> file. For example <code>"path_to_file"</code> could be substituted with <code>"/Users/samantha/mydataviz_folder/extdata"</code>. See Appendix I “Importing data” for more details.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="data-wrangling.html#cb220-1" aria-hidden="true" tabindex="-1"></a>flights <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">&#39;path_to_file/flightsLAX.csv&#39;</span>)</span></code></pre></div>
<p>Typing the name of the newly created <code>data.table</code> (<code>flights</code>) in the console displays its first and last rows. We observe that reading the file was successful.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="data-wrangling.html#cb221-1" aria-hidden="true" tabindex="-1"></a>flights</span></code></pre></div>
<pre><code>##         YEAR MONTH DAY DAY_OF_WEEK AIRLINE FLIGHT_NUMBER
##      1: 2015     1   1           4      AA          2336
##      2: 2015     1   1           4      AA           258
##      3: 2015     1   1           4      US          2013
##      4: 2015     1   1           4      DL          1434
##      5: 2015     1   1           4      AA           115
##     ---                                                 
## 389365: 2015    12  31           4      AA          1538
## 389366: 2015    12  31           4      AS           175
## 389367: 2015    12  31           4      AS           471
## 389368: 2015    12  31           4      AA           219
## 389369: 2015    12  31           4      B6           688
##         TAIL_NUMBER ORIGIN_AIRPORT DESTINATION_AIRPORT
##      1:      N3KUAA            LAX                 PBI
##      2:      N3HYAA            LAX                 MIA
##      3:      N584UW            LAX                 CLT
##      4:      N547US            LAX                 MSP
##      5:      N3CTAA            LAX                 MIA
##     ---                                               
## 389365:      N866AA            LAX                 MIA
## 389366:      N431AS            LAX                 ANC
## 389367:      N570AS            LAX                 SEA
## 389368:      N3LYAA            LAX                 ORD
## 389369:      N657JB            LAX                 BOS
##         DEPARTURE_TIME AIR_TIME DISTANCE ARRIVAL_TIME
##      1:              2      263     2330          741
##      2:             15      258     2342          756
##      3:             44      228     2125          753
##      4:             35      188     1535          605
##      5:            103      255     2342          839
##     ---                                              
## 389365:           2357      250     2342          731
## 389366:           2350      291     2345          400
## 389367:           2353      132      954          225
## 389368:           2358      198     1744          544
## 389369:           2355      272     2611          753</code></pre>
</div>
<div id="inspecting-tables" class="section level3" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> Inspecting tables</h3>
<p>A first step in any analysis should involve inspecting the data we just read in. This often starts by looking the first and last rows of the table as we did above. The next information we are often interested in is the size of our data set. We can use the following commands to obtain it:</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="data-wrangling.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(flights)   <span class="co"># nrow(flights) for number of rows</span></span></code></pre></div>
<pre><code>## [1] 13</code></pre>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="data-wrangling.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(flights)    <span class="co"># returns nrow and ncol</span></span></code></pre></div>
<pre><code>## [1] 389369     13</code></pre>
<!-- ### Technical details -->
<!-- The structure of the `data.table` is essentially a list of lists. To get the dimensions of our `data.table` we can either use the `dim()` function to get the dimensions of our data.table (M rows x N columns) or to use the `ncol()` `nrow()` functions: -->
<!-- ```{r} -->
<!-- class(DT) -->
<!-- is.list(DT) -->
<!-- nrow(DT)   # ncol(DT) -->
<!-- dim(DT) -->
<!-- ``` -->
<p>Next, we are often interested in basic statistics on the columns. To obtain this information we can call the <code>summary()</code> function on the table.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="data-wrangling.html#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(flights[,<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>])</span></code></pre></div>
<pre><code>##       YEAR          MONTH             DAY      
##  Min.   :2015   Min.   : 1.000   Min.   : 1.0  
##  1st Qu.:2015   1st Qu.: 3.000   1st Qu.: 8.0  
##  Median :2015   Median : 6.000   Median :16.0  
##  Mean   :2015   Mean   : 6.198   Mean   :15.7  
##  3rd Qu.:2015   3rd Qu.: 9.000   3rd Qu.:23.0  
##  Max.   :2015   Max.   :12.000   Max.   :31.0  
##   DAY_OF_WEEK      AIRLINE          FLIGHT_NUMBER 
##  Min.   :1.000   Length:389369      Min.   :   1  
##  1st Qu.:2.000   Class :character   1st Qu.: 501  
##  Median :4.000   Mode  :character   Median :1296  
##  Mean   :3.934                      Mean   :1905  
##  3rd Qu.:6.000                      3rd Qu.:2617  
##  Max.   :7.000                      Max.   :6896</code></pre>
<p>This provides us already a lot of information about our data. We can for example see that all data is from 2015 as all values in the YEAR column are 2015. But for categorical data this is not very insightful, as we can see for the AIRLINE column.</p>
<p>To investigate categorical columns we can have a look at their unique elements using:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="data-wrangling.html#cb229-1" aria-hidden="true" tabindex="-1"></a>flights[, <span class="fu">unique</span>(AIRLINE)]</span></code></pre></div>
<pre><code>##  [1] &quot;AA&quot; &quot;US&quot; &quot;DL&quot; &quot;UA&quot; &quot;OO&quot; &quot;AS&quot; &quot;B6&quot; &quot;NK&quot; &quot;VX&quot; &quot;WN&quot; &quot;HA&quot;
## [12] &quot;F9&quot; &quot;MQ&quot;</code></pre>
<p>This command provided us the airline identifiers present in the dataset. Another valuable information for categorical variables is how often each category occurs. This can be obtained using the following commands:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="data-wrangling.html#cb231-1" aria-hidden="true" tabindex="-1"></a>flights[, <span class="fu">table</span>(AIRLINE)]</span></code></pre></div>
<pre><code>## AIRLINE
##    AA    AS    B6    DL    F9    HA    MQ    NK    OO    UA 
## 65483 16144  8216 50343  2770  3112   368  8688 73389 54862 
##    US    VX    WN 
##  7374 23598 75022</code></pre>
</div>
</div>
<div id="row-subsetting" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Row subsetting</h2>
<p>As mentioned, the general basic form of the data.table syntax is:</p>
<pre><code>DT[ i,  j,  by ] #
    |   |   |
    |   |    -------&gt; grouped by what?
    |    -------&gt; what to do with the columns?
    ---&gt; on which rows?</code></pre>
<p>Let us first look at the <code>i</code> argument, i.e. row indexing. The parameter <code>i</code> can be any vector of integers, corresponding to the row indices to select, or some logical vectors indicating which rows to select. Here are some typical examples.</p>
<div id="subsetting-rows-by-indices" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Subsetting rows by indices</h3>
<p>If we want to see the second element of the table, we can do the following:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="data-wrangling.html#cb234-1" aria-hidden="true" tabindex="-1"></a>flights[<span class="dv">2</span>, ]   <span class="co"># Access the 2nd row (also flights[2] or flights[i = 2])</span></span></code></pre></div>
<pre><code>##    YEAR MONTH DAY DAY_OF_WEEK AIRLINE FLIGHT_NUMBER
## 1: 2015     1   1           4      AA           258
##    TAIL_NUMBER ORIGIN_AIRPORT DESTINATION_AIRPORT
## 1:      N3HYAA            LAX                 MIA
##    DEPARTURE_TIME AIR_TIME DISTANCE ARRIVAL_TIME
## 1:             15      258     2342          756</code></pre>
<p>A shorter writing allows leaving out the comma:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="data-wrangling.html#cb236-1" aria-hidden="true" tabindex="-1"></a>flights[<span class="dv">2</span>]   <span class="co"># Access the 2nd row (also flights[2] or flights[i = 2])</span></span></code></pre></div>
<pre><code>##    YEAR MONTH DAY DAY_OF_WEEK AIRLINE FLIGHT_NUMBER
## 1: 2015     1   1           4      AA           258
##    TAIL_NUMBER ORIGIN_AIRPORT DESTINATION_AIRPORT
## 1:      N3HYAA            LAX                 MIA
##    DEPARTURE_TIME AIR_TIME DISTANCE ARRIVAL_TIME
## 1:             15      258     2342          756</code></pre>
<p>For accessing multiple consecutive rows we can use the <code>start:stop</code> syntax as for example:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="data-wrangling.html#cb238-1" aria-hidden="true" tabindex="-1"></a>flights[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]   </span></code></pre></div>
<pre><code>##    YEAR MONTH DAY DAY_OF_WEEK AIRLINE FLIGHT_NUMBER
## 1: 2015     1   1           4      AA          2336
## 2: 2015     1   1           4      AA           258
## 3: 2015     1   1           4      US          2013
##    TAIL_NUMBER ORIGIN_AIRPORT DESTINATION_AIRPORT
## 1:      N3KUAA            LAX                 PBI
## 2:      N3HYAA            LAX                 MIA
## 3:      N584UW            LAX                 CLT
##    DEPARTURE_TIME AIR_TIME DISTANCE ARRIVAL_TIME
## 1:              2      263     2330          741
## 2:             15      258     2342          756
## 3:             44      228     2125          753</code></pre>
<p>Accessing multiple rows that are not necessarily consecutive can be done by creating an index vector with <code>c()</code>:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="data-wrangling.html#cb240-1" aria-hidden="true" tabindex="-1"></a>flights[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">5</span>)]</span></code></pre></div>
<pre><code>##    YEAR MONTH DAY DAY_OF_WEEK AIRLINE FLIGHT_NUMBER
## 1: 2015     1   1           4      US          2013
## 2: 2015     1   1           4      AA           115
##    TAIL_NUMBER ORIGIN_AIRPORT DESTINATION_AIRPORT
## 1:      N584UW            LAX                 CLT
## 2:      N3CTAA            LAX                 MIA
##    DEPARTURE_TIME AIR_TIME DISTANCE ARRIVAL_TIME
## 1:             44      228     2125          753
## 2:            103      255     2342          839</code></pre>
</div>
<div id="subsetting-rows-by-logical-conditions" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Subsetting rows by logical conditions</h3>
<p>Often, a more useful way to subset rows is using logical conditions, using for <code>i</code> a logical vector. We can create such logical vectors using the following binary operators:</p>
<ul>
<li><code>==</code></li>
<li><code>&lt;</code></li>
<li><code>&gt;</code></li>
<li><code>!=</code></li>
<li><code>%in%</code></li>
</ul>
<p>For example, entries of flights operated by “AA” (American Airlines) can be extracted using:</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="data-wrangling.html#cb242-1" aria-hidden="true" tabindex="-1"></a>flights[AIRLINE <span class="sc">==</span> <span class="st">&quot;AA&quot;</span>]</span></code></pre></div>
<pre><code>##        YEAR MONTH DAY DAY_OF_WEEK AIRLINE FLIGHT_NUMBER
##     1: 2015     1   1           4      AA          2336
##     2: 2015     1   1           4      AA           258
##     3: 2015     1   1           4      AA           115
##     4: 2015     1   1           4      AA          2410
##     5: 2015     1   1           4      AA          1515
##    ---                                                 
## 65479: 2015    12  31           4      AA          1116
## 65480: 2015    12  31           4      AA           246
## 65481: 2015    12  31           4      AA          1927
## 65482: 2015    12  31           4      AA          1538
## 65483: 2015    12  31           4      AA           219
##        TAIL_NUMBER ORIGIN_AIRPORT DESTINATION_AIRPORT
##     1:      N3KUAA            LAX                 PBI
##     2:      N3HYAA            LAX                 MIA
##     3:      N3CTAA            LAX                 MIA
##     4:      N3BAAA            LAX                 DFW
##     5:      N3HMAA            LAX                 ORD
##    ---                                               
## 65479:      N029AA            LAX                 ATL
## 65480:      N863AA            KOA                 LAX
## 65481:      N837AW            LAX                 IAD
## 65482:      N866AA            LAX                 MIA
## 65483:      N3LYAA            LAX                 ORD
##        DEPARTURE_TIME AIR_TIME DISTANCE ARRIVAL_TIME
##     1:              2      263     2330          741
##     2:             15      258     2342          756
##     3:            103      255     2342          839
##     4:            600      150     1235         1052
##     5:            557      202     1744         1139
##    ---                                              
## 65479:           2256      207     1947          553
## 65480:           2335      272     2504          635
## 65481:           2346      239     2288          712
## 65482:           2357      250     2342          731
## 65483:           2358      198     1744          544</code></pre>
<p>Alternatively, if we are interested in all flights from any destination to the airports in NYC (“JFK” and “LGA”), we can subset the rows using the following command:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="data-wrangling.html#cb244-1" aria-hidden="true" tabindex="-1"></a>flights[DESTINATION_AIRPORT <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;LGA&quot;</span>, <span class="st">&quot;JFK&quot;</span>)]</span></code></pre></div>
<pre><code>##        YEAR MONTH DAY DAY_OF_WEEK AIRLINE FLIGHT_NUMBER
##     1: 2015     1   1           4      B6            24
##     2: 2015     1   1           4      DL           476
##     3: 2015     1   1           4      AA           118
##     4: 2015     1   1           4      VX           404
##     5: 2015     1   1           4      UA           275
##    ---                                                 
## 12011: 2015    12  31           4      AA           180
## 12012: 2015    12  31           4      B6           524
## 12013: 2015    12  31           4      B6           624
## 12014: 2015    12  31           4      DL          1262
## 12015: 2015    12  31           4      B6          1124
##        TAIL_NUMBER ORIGIN_AIRPORT DESTINATION_AIRPORT
##     1:      N923JB            LAX                 JFK
##     2:      N196DN            LAX                 JFK
##     3:      N788AA            LAX                 JFK
##     4:      N621VA            LAX                 JFK
##     5:      N598UA            LAX                 JFK
##    ---                                               
## 12011:      N796AA            LAX                 JFK
## 12012:      N934JB            LAX                 JFK
## 12013:      N942JB            LAX                 JFK
## 12014:      N394DL            LAX                 JFK
## 12015:      N943JB            LAX                 JFK
##        DEPARTURE_TIME AIR_TIME DISTANCE ARRIVAL_TIME
##     1:            620      279     2475         1413
##     2:            650      274     2475         1458
##     3:            650      268     2475         1436
##     4:            728      268     2475         1512
##     5:            806      277     2475         1606
##    ---                                              
## 12011:           1640      259     2475           18
## 12012:           1645      261     2475           18
## 12013:           2107      280     2475          513
## 12014:           2244      256     2475          625
## 12015:           2349      274     2475          748</code></pre>
<p>Additionally, we can concatenate multiple conditions using the logical OR <code>|</code> or the logical AND <code>&amp;</code> operator. For instance, if we want to inspect all flights departing between 6am and 7am operated by American Airlines we can use the following statement:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="data-wrangling.html#cb246-1" aria-hidden="true" tabindex="-1"></a>flights[AIRLINE <span class="sc">==</span> <span class="st">&quot;AA&quot;</span> <span class="sc">&amp;</span> DEPARTURE_TIME <span class="sc">&gt;</span> <span class="dv">600</span> <span class="sc">&amp;</span> DEPARTURE_TIME <span class="sc">&lt;</span> <span class="dv">700</span>]</span></code></pre></div>
<pre><code>##       YEAR MONTH DAY DAY_OF_WEEK AIRLINE FLIGHT_NUMBER
##    1: 2015     1   1           4      AA          1686
##    2: 2015     1   1           4      AA          1361
##    3: 2015     1   1           4      AA          2420
##    4: 2015     1   1           4      AA           338
##    5: 2015     1   1           4      AA          2424
##   ---                                                 
## 3820: 2015    12  31           4      AA           169
## 3821: 2015    12  31           4      AA          1352
## 3822: 2015    12  31           4      AA           146
## 3823: 2015    12  31           4      AA          2453
## 3824: 2015    12  31           4      AA           118
##       TAIL_NUMBER ORIGIN_AIRPORT DESTINATION_AIRPORT
##    1:      N4XXAA            LAX                 STL
##    2:      N3KYAA            BNA                 LAX
##    3:      N3ERAA            LAX                 DFW
##    4:      N3DJAA            LAX                 SFO
##    5:      N3DLAA            LAX                 DFW
##   ---                                               
## 3820:      N787AA            SFO                 LAX
## 3821:      N7CAAA            MIA                 LAX
## 3822:      N3MKAA            LAX                 BOS
## 3823:      N869AA            LAX                 DFW
## 3824:      N791AA            LAX                 JFK
##       DEPARTURE_TIME AIR_TIME DISTANCE ARRIVAL_TIME
##    1:            609      183     1592         1134
##    2:            607      255     1797          847
##    3:            619      149     1235         1119
##    4:            644       55      337          803
##    5:            641      146     1235         1149
##   ---                                              
## 3820:            623       54      337          740
## 3821:            651      303     2342          913
## 3822:            650      268     2611         1446
## 3823:            651      142     1235         1134
## 3824:            659      272     2475         1505</code></pre>
</div>
</div>
<div id="column-operations" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Column operations</h2>
<p>You may have wondered why R correctly runs code such as <code>flights[AIRLINE == "AA"]</code> although <code>AIRLINE</code> is not a variable of the environment but a column of the <code>data.table</code> <code>flights</code>. Such a call would not execute properly with a <code>data.frame</code>. The reason is that code entered inside the <code>[]</code> brackets of a <code>data.table</code> is interpreted using the <code>data.table</code> environment. Inside this environment, columns are seen as variables already. This makes the syntax very light and readable for row subsetting as we just saw. It becomes particularly powerful for column operations. We now look at this.</p>
<p>Although feasible, it is not advisable to access a column by its number since the ordering or number of columns can easily change. Also, if you have a data set with a large number of columns (e.g. 50), how do you know which one is column 18? Therefore, <strong>use the column name instead</strong>. Using column names prevents bugs.</p>
<div id="working-with-columns" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Working with columns</h3>
<p>Accessing columns by name also makes the code more readable: <code>flights[, TAIL_NUMBER]</code> instead of <code>flights[, 7]</code>.</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="data-wrangling.html#cb248-1" aria-hidden="true" tabindex="-1"></a>flights[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, TAIL_NUMBER]    <span class="co"># Access column x (also DT$x or DT[j=x]). </span></span></code></pre></div>
<pre><code>##  [1] &quot;N3KUAA&quot; &quot;N3HYAA&quot; &quot;N584UW&quot; &quot;N547US&quot; &quot;N3CTAA&quot; &quot;N76517&quot;
##  [7] &quot;N925SW&quot; &quot;N719SK&quot; &quot;N435SW&quot; &quot;N560SW&quot;</code></pre>
<p>For accessing a specific cell (i.e. specific column and specific row), we can use the following syntax:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="data-wrangling.html#cb250-1" aria-hidden="true" tabindex="-1"></a>flights[<span class="dv">4</span>, TAIL_NUMBER]   <span class="co"># Access a specific cell.</span></span></code></pre></div>
<pre><code>## [1] &quot;N547US&quot;</code></pre>
<p>This command for accessing multiple columns would return a vector:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="data-wrangling.html#cb252-1" aria-hidden="true" tabindex="-1"></a>flights[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="fu">c</span>(TAIL_NUMBER, ORIGIN_AIRPORT)]  </span></code></pre></div>
<pre><code>## [1] &quot;N3KUAA&quot; &quot;N3HYAA&quot; &quot;LAX&quot;    &quot;LAX&quot;</code></pre>
<p>However, when accessing many columns, we probably want to return a <code>data.table</code> instead of a vector. For that, we need to provide R with a list, so we use <code>list(colA, colB)</code> or its simplified version <code>.(colA, colB)</code>:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="data-wrangling.html#cb254-1" aria-hidden="true" tabindex="-1"></a>flights[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="fu">list</span>(TAIL_NUMBER, ORIGIN_AIRPORT)]</span></code></pre></div>
<pre><code>##    TAIL_NUMBER ORIGIN_AIRPORT
## 1:      N3KUAA            LAX
## 2:      N3HYAA            LAX</code></pre>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="data-wrangling.html#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Same as before.</span></span>
<span id="cb256-2"><a href="data-wrangling.html#cb256-2" aria-hidden="true" tabindex="-1"></a>flights[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, .(TAIL_NUMBER, ORIGIN_AIRPORT)]</span></code></pre></div>
<pre><code>##    TAIL_NUMBER ORIGIN_AIRPORT
## 1:      N3KUAA            LAX
## 2:      N3HYAA            LAX</code></pre>
</div>
<div id="column-operations-1" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Column operations</h3>
<p>We already saw that inside the <code>[]</code> environment, columns are seen as variables, so we can apply functions to them.</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="data-wrangling.html#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Similar to mean(flights[, AIR_TIME])</span></span>
<span id="cb258-2"><a href="data-wrangling.html#cb258-2" aria-hidden="true" tabindex="-1"></a>flights[, <span class="fu">mean</span>(AIR_TIME, <span class="at">na.rm=</span><span class="cn">TRUE</span>)]   </span></code></pre></div>
<pre><code>## [1] 162.1379</code></pre>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="data-wrangling.html#cb260-1" aria-hidden="true" tabindex="-1"></a>flights[AIRLINE <span class="sc">==</span> <span class="st">&quot;OO&quot;</span>, <span class="fu">mean</span>(AIR_TIME, <span class="at">na.rm=</span><span class="cn">TRUE</span>)]</span></code></pre></div>
<pre><code>## [1] 68.02261</code></pre>
<p>To compute operations in multiple columns, we must provide a list (unless we want the result to be a vector).</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="data-wrangling.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Same as flights[, .(mean(AIR_TIME), median(AIR_TIME))]</span></span>
<span id="cb262-2"><a href="data-wrangling.html#cb262-2" aria-hidden="true" tabindex="-1"></a>flights[, <span class="fu">list</span>(<span class="fu">mean</span>(AIR_TIME, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="fu">median</span>(AIR_TIME, <span class="at">na.rm=</span><span class="cn">TRUE</span>))]</span></code></pre></div>
<pre><code>##          V1  V2
## 1: 162.1379 150</code></pre>
<p>To give meaningful names to the computations from before, we can use the following command:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="data-wrangling.html#cb264-1" aria-hidden="true" tabindex="-1"></a>flights[, .(<span class="at">mean_AIR_TIME =</span> <span class="fu">mean</span>(AIR_TIME, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">median_AIR_TIME =</span> <span class="fu">median</span>(AIR_TIME, <span class="at">na.rm=</span><span class="cn">TRUE</span>))] </span></code></pre></div>
<pre><code>##    mean_AIR_TIME median_AIR_TIME
## 1:      162.1379             150</code></pre>
<p>Any operation can be applied to the columns, just as with variables. This code computes the average speed as the ratio of <code>AIR_TIME</code> over <code>DISTANCE</code> for the 5 first entries of the table <code>flights</code>:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="data-wrangling.html#cb266-1" aria-hidden="true" tabindex="-1"></a>flights[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,AIR_TIME<span class="sc">/</span>DISTANCE]</span></code></pre></div>
<pre><code>## [1] 0.1128755 0.1101623 0.1072941 0.1224756 0.1088813</code></pre>
</div>
<div id="advanced-commands-apply-over-columns" class="section level3" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Advanced commands: *apply() over columns</h3>
<p>The columns of a <code>data.table</code> are exposed as a list to the environment. Therefore functions applying to a list can be applied to them, including those of the <code>*apply</code> family such as sapply()`. For example:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="data-wrangling.html#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(flights, class)   <span class="co"># Try the same with lapply</span></span></code></pre></div>
<pre><code>##                YEAR               MONTH                 DAY 
##           &quot;integer&quot;           &quot;integer&quot;           &quot;integer&quot; 
##         DAY_OF_WEEK             AIRLINE       FLIGHT_NUMBER 
##           &quot;integer&quot;         &quot;character&quot;           &quot;integer&quot; 
##         TAIL_NUMBER      ORIGIN_AIRPORT DESTINATION_AIRPORT 
##         &quot;character&quot;         &quot;character&quot;         &quot;character&quot; 
##      DEPARTURE_TIME            AIR_TIME            DISTANCE 
##           &quot;integer&quot;           &quot;integer&quot;           &quot;integer&quot; 
##        ARRIVAL_TIME 
##           &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="data-wrangling.html#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that we can access columns stored as variables by setting with=F.</span></span>
<span id="cb270-2"><a href="data-wrangling.html#cb270-2" aria-hidden="true" tabindex="-1"></a><span class="co"># In this case, `colnames(iris_dt)!=&quot;Species&quot;` returns a logical vector and `</span></span>
<span id="cb270-3"><a href="data-wrangling.html#cb270-3" aria-hidden="true" tabindex="-1"></a><span class="co"># iris_dt` is subsetted by the logical vector</span></span>
<span id="cb270-4"><a href="data-wrangling.html#cb270-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-5"><a href="data-wrangling.html#cb270-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Same as sapply(iris_dt[, 1:4], sum)</span></span>
<span id="cb270-6"><a href="data-wrangling.html#cb270-6" aria-hidden="true" tabindex="-1"></a><span class="co">#sapply(iris_dt[, colnames(iris_dt)!=&quot;Species&quot;, with = F], sum) </span></span></code></pre></div>
</div>
</div>
<div id="the-by-option" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> The ‘by’ option</h2>
<p>The <code>by</code> option allows executing the <code>j</code> command by groups. For example, we can use<code>by =</code> to compute the mean flight time per airline:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="data-wrangling.html#cb271-1" aria-hidden="true" tabindex="-1"></a>flights[, .(<span class="at">mean_AIRTIME =</span> <span class="fu">mean</span>(AIR_TIME, <span class="at">na.rm=</span><span class="cn">TRUE</span>)), by <span class="ot">=</span> AIRLINE]</span></code></pre></div>
<pre><code>##     AIRLINE mean_AIRTIME
##  1:      AA    219.48133
##  2:      US    210.39488
##  3:      DL    207.07201
##  4:      UA    211.62008
##  5:      OO     68.02261
##  6:      AS    141.01870
##  7:      B6    309.79568
##  8:      NK    179.55828
##  9:      VX    185.36374
## 10:      WN    105.19976
## 11:      HA    307.95961
## 12:      F9    159.94041
## 13:      MQ    102.15210</code></pre>
<p>This way we can easily spot that one airline conducts on average shorter flights. Moreover, we can compute the mean and standard deviation of the air time of every airline:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="data-wrangling.html#cb273-1" aria-hidden="true" tabindex="-1"></a>flights[, .(<span class="at">mean_AIRTIME =</span> <span class="fu">mean</span>(AIR_TIME, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">sd_AIR_TIME =</span> <span class="fu">sd</span>(AIR_TIME, <span class="at">na.rm=</span><span class="cn">TRUE</span>)), by <span class="ot">=</span> AIRLINE]</span></code></pre></div>
<pre><code>##     AIRLINE mean_AIRTIME sd_AIR_TIME
##  1:      AA    219.48133   92.889719
##  2:      US    210.39488  105.224833
##  3:      DL    207.07201   88.908566
##  4:      UA    211.62008   94.832456
##  5:      OO     68.02261   41.065036
##  6:      AS    141.01870   51.806424
##  7:      B6    309.79568   28.457740
##  8:      NK    179.55828   78.194706
##  9:      VX    185.36374  113.504572
## 10:      WN    105.19976   69.257334
## 11:      HA    307.95961   23.905491
## 12:      F9    159.94041   61.412379
## 13:      MQ    102.15210    8.531046</code></pre>
<p>Although we could write <code>flights[i = 5, j = AIRLINE]</code>, we usually omit the <code>i =</code> and <code>j =</code> from the syntax, and write <code>flights[5, AIRLINE]</code> instead. However, for clarity we usually include the <code>by =</code> in the syntax.</p>
</div>
<div id="counting-occurences-with-.n" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Counting occurences with <code>.N</code></h2>
<p>The <code>.N</code> is a special in-built variable that counts the number observations within a table. Evaluating <code>.N</code> alone is equal to <code>nrow()</code> of a table.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="data-wrangling.html#cb275-1" aria-hidden="true" tabindex="-1"></a>flights[, .N]</span></code></pre></div>
<pre><code>## [1] 389369</code></pre>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="data-wrangling.html#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(flights)</span></code></pre></div>
<pre><code>## [1] 389369</code></pre>
<p>But the <code>.N</code> command becomes a lot more powerful when used with grouping or conditioning. We already saw earlier how we can use it to count the number of occurrences of elements in categorical columns. For instance, we can get the number of flights for each airline:</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="data-wrangling.html#cb279-1" aria-hidden="true" tabindex="-1"></a>flights[, .N, by <span class="ot">=</span> <span class="st">&#39;AIRLINE&#39;</span>]</span></code></pre></div>
<pre><code>##     AIRLINE     N
##  1:      AA 65483
##  2:      US  7374
##  3:      DL 50343
##  4:      UA 54862
##  5:      OO 73389
##  6:      AS 16144
##  7:      B6  8216
##  8:      NK  8688
##  9:      VX 23598
## 10:      WN 75022
## 11:      HA  3112
## 12:      F9  2770
## 13:      MQ   368</code></pre>
<p>Remembering the <code>data.table</code> definition: “Take <strong>DT</strong>, subset rows using <strong>i</strong>, then select or calculate <strong>j</strong>, grouped by <strong>by</strong>,”
we can build even more powerful statements using all three elements. For example, we can, for each airline, get the number of flights arriving to the airport JFK:</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="data-wrangling.html#cb281-1" aria-hidden="true" tabindex="-1"></a>flights[DESTINATION_AIRPORT <span class="sc">==</span> <span class="st">&quot;JFK&quot;</span>, .N, by <span class="ot">=</span> <span class="st">&#39;AIRLINE&#39;</span>]</span></code></pre></div>
<pre><code>##    AIRLINE    N
## 1:      B6 2488
## 2:      DL 2546
## 3:      AA 3804
## 4:      VX 1652
## 5:      UA 1525</code></pre>
</div>
<div id="extending-tables" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Extending tables</h2>
<div id="creating-new-columns-the-command" class="section level3" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> Creating new columns (the := command)</h3>
<p>The <code>:=</code> operator updates the <code>data.table</code> we are working in place, so writing <code>DT &lt;- DT[,... := ...]</code> is redundant. This operator, plus all <code>set</code> functions (e.g. <code>setnames</code> for column name renaming, <code>setcolorder</code> for changing the positions in which the columns positioned are inside the <code>DT</code>, etc), change their input by <em>reference</em>. No copy of the object is made, which makes the operation faster and less memory-consuming.</p>
<p>As an example, we can add a new column called <code>SPEED</code> (in miles per hour) whose value is the <code>DISTANCE</code> divided by <code>AIR_TIME</code> times 60:</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="data-wrangling.html#cb283-1" aria-hidden="true" tabindex="-1"></a>flights[, SPEED <span class="sc">:</span><span class="er">=</span> DISTANCE <span class="sc">/</span> AIR_TIME <span class="sc">*</span> <span class="dv">60</span>]</span>
<span id="cb283-2"><a href="data-wrangling.html#cb283-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flights)</span></code></pre></div>
<pre><code>##    YEAR MONTH DAY DAY_OF_WEEK AIRLINE FLIGHT_NUMBER
## 1: 2015     1   1           4      AA          2336
## 2: 2015     1   1           4      AA           258
## 3: 2015     1   1           4      US          2013
## 4: 2015     1   1           4      DL          1434
## 5: 2015     1   1           4      AA           115
## 6: 2015     1   1           4      UA          1545
##    TAIL_NUMBER ORIGIN_AIRPORT DESTINATION_AIRPORT
## 1:      N3KUAA            LAX                 PBI
## 2:      N3HYAA            LAX                 MIA
## 3:      N584UW            LAX                 CLT
## 4:      N547US            LAX                 MSP
## 5:      N3CTAA            LAX                 MIA
## 6:      N76517            LAX                 IAH
##    DEPARTURE_TIME AIR_TIME DISTANCE ARRIVAL_TIME    SPEED
## 1:              2      263     2330          741 531.5589
## 2:             15      258     2342          756 544.6512
## 3:             44      228     2125          753 559.2105
## 4:             35      188     1535          605 489.8936
## 5:            103      255     2342          839 551.0588
## 6:            112      156     1379          607 530.3846</code></pre>
<p>Having computed a new column using the <code>:=</code> operator, we can use it for further analyses. For instance, we can compute the average speed, air time and distance for each airline:</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="data-wrangling.html#cb285-1" aria-hidden="true" tabindex="-1"></a>flights[, .(<span class="at">mean_AIR_TIME =</span> <span class="fu">mean</span>(AIR_TIME, <span class="at">na.rm=</span><span class="cn">TRUE</span>), </span>
<span id="cb285-2"><a href="data-wrangling.html#cb285-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean_SPEED =</span> <span class="fu">mean</span>(SPEED, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb285-3"><a href="data-wrangling.html#cb285-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean_DISTANCE =</span> <span class="fu">mean</span>(DISTANCE, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb285-4"><a href="data-wrangling.html#cb285-4" aria-hidden="true" tabindex="-1"></a>            ), by<span class="ot">=</span>AIRLINE] </span></code></pre></div>
<pre><code>##     AIRLINE mean_AIR_TIME mean_SPEED mean_DISTANCE
##  1:      AA     219.48133   461.2839     1739.2331
##  2:      US     210.39488   452.1641     1658.2581
##  3:      DL     207.07201   466.0330     1656.2165
##  4:      UA     211.62008   464.2928     1693.5504
##  5:      OO      68.02261   349.5549      437.2337
##  6:      AS     141.01870   439.0120     1040.0340
##  7:      B6     309.79568   484.8242     2486.1489
##  8:      NK     179.55828   450.0221     1402.1591
##  9:      VX     185.36374   433.0870     1432.5384
## 10:      WN     105.19976   409.3803      760.2593
## 11:      HA     307.95961   497.3118     2537.8107
## 12:      F9     159.94041   461.0684     1235.6664
## 13:      MQ     102.15210   435.5580      737.0000</code></pre>
<p>Now we can see that the flights by the carrier “OO” are not just shorter, but also slow. This could for example lead us to the hypothesis, that “OO” is a small regional carrier, which operates slower planes.</p>
<p>Additionally we can use the <code>:=</code> operator to remove columns. If we for example observe that tail numbers are not important for our analysis we can remove them with the following statement:</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="data-wrangling.html#cb287-1" aria-hidden="true" tabindex="-1"></a>flights[, TAIL_NUMBER <span class="sc">:</span><span class="er">=</span> <span class="cn">NULL</span>]</span>
<span id="cb287-2"><a href="data-wrangling.html#cb287-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flights)</span></code></pre></div>
<pre><code>##    YEAR MONTH DAY DAY_OF_WEEK AIRLINE FLIGHT_NUMBER
## 1: 2015     1   1           4      AA          2336
## 2: 2015     1   1           4      AA           258
## 3: 2015     1   1           4      US          2013
## 4: 2015     1   1           4      DL          1434
## 5: 2015     1   1           4      AA           115
## 6: 2015     1   1           4      UA          1545
##    ORIGIN_AIRPORT DESTINATION_AIRPORT DEPARTURE_TIME
## 1:            LAX                 PBI              2
## 2:            LAX                 MIA             15
## 3:            LAX                 CLT             44
## 4:            LAX                 MSP             35
## 5:            LAX                 MIA            103
## 6:            LAX                 IAH            112
##    AIR_TIME DISTANCE ARRIVAL_TIME    SPEED
## 1:      263     2330          741 531.5589
## 2:      258     2342          756 544.6512
## 3:      228     2125          753 559.2105
## 4:      188     1535          605 489.8936
## 5:      255     2342          839 551.0588
## 6:      156     1379          607 530.3846</code></pre>
<p>Here we observe, that the tail numbers are gone from the <code>data.table</code>.</p>
</div>
<div id="advanced-multiple-assignments" class="section level3" number="2.6.2">
<h3><span class="header-section-number">2.6.2</span> Advanced: Multiple assignments</h3>
<p>With the following syntax we can assign multiple new columns at once. We the base R dataset <code>iris</code>,<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> which we first transform into a <code>data.table</code>.</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="data-wrangling.html#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load the Iris data table</span></span>
<span id="cb289-2"><a href="data-wrangling.html#cb289-2" aria-hidden="true" tabindex="-1"></a>iris_dt <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(iris)</span>
<span id="cb289-3"><a href="data-wrangling.html#cb289-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Add columns with sepal and petal area. Note the syntax of multiple assignment.</span></span>
<span id="cb289-4"><a href="data-wrangling.html#cb289-4" aria-hidden="true" tabindex="-1"></a>iris_dt[, <span class="st">`</span><span class="at">:=</span><span class="st">`</span> (<span class="at">Sepal.Area =</span> Sepal.Length <span class="sc">*</span> Sepal.Width,</span>
<span id="cb289-5"><a href="data-wrangling.html#cb289-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">Petal.Area =</span> Petal.Length <span class="sc">*</span> Petal.Width)][<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1:          5.1         3.5          1.4         0.2
## 2:          4.9         3.0          1.4         0.2
## 3:          4.7         3.2          1.3         0.2
##    Species Sepal.Area Petal.Area
## 1:  setosa      17.85       0.28
## 2:  setosa      14.70       0.28
## 3:  setosa      15.04       0.26</code></pre>
<p>You can also delete columns by using the <code>:=</code> command.</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="data-wrangling.html#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let&#39;s assume setosa flowers are orange, versicolor purple and virginica pink.</span></span>
<span id="cb291-2"><a href="data-wrangling.html#cb291-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a column with these colors.</span></span>
<span id="cb291-3"><a href="data-wrangling.html#cb291-3" aria-hidden="true" tabindex="-1"></a>iris_dt[Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>, color <span class="sc">:</span><span class="er">=</span> <span class="st">&quot;orange&quot;</span>]</span>
<span id="cb291-4"><a href="data-wrangling.html#cb291-4" aria-hidden="true" tabindex="-1"></a>iris_dt[Species <span class="sc">==</span> <span class="st">&quot;versicolor&quot;</span>, color <span class="sc">:</span><span class="er">=</span> <span class="st">&quot;purple&quot;</span>]</span>
<span id="cb291-5"><a href="data-wrangling.html#cb291-5" aria-hidden="true" tabindex="-1"></a>iris_dt[Species <span class="sc">==</span> <span class="st">&quot;virginica&quot;</span>, color <span class="sc">:</span><span class="er">=</span> <span class="st">&quot;pink&quot;</span>]</span>
<span id="cb291-6"><a href="data-wrangling.html#cb291-6" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(iris_dt[, .(Species, color)])</span></code></pre></div>
<pre><code>##       Species  color
## 1:     setosa orange
## 2: versicolor purple
## 3:  virginica   pink</code></pre>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="data-wrangling.html#cb293-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We can delete this new column by setting it to NULL</span></span>
<span id="cb293-2"><a href="data-wrangling.html#cb293-2" aria-hidden="true" tabindex="-1"></a>iris_dt[, color <span class="sc">:</span><span class="er">=</span> <span class="cn">NULL</span>]</span>
<span id="cb293-3"><a href="data-wrangling.html#cb293-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(iris_dt)</span></code></pre></div>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot;
## [4] &quot;Petal.Width&quot;  &quot;Species&quot;      &quot;Sepal.Area&quot;  
## [7] &quot;Petal.Area&quot;</code></pre>
</div>
<div id="copying-tables" class="section level3" number="2.6.3">
<h3><span class="header-section-number">2.6.3</span> Copying tables</h3>
<p>What do we mean when we say that <code>data.table</code> modifies columns <em>by reference</em>?</p>
<p>It means that no new copy of the object is made in the memory, unless we actually create one using <code>copy()</code>.</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="data-wrangling.html#cb295-1" aria-hidden="true" tabindex="-1"></a>or_dt <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">b =</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">20</span>)</span>
<span id="cb295-2"><a href="data-wrangling.html#cb295-2" aria-hidden="true" tabindex="-1"></a><span class="co"># No new object is created, both new_dt and or_dt point to the same memory chunk.</span></span>
<span id="cb295-3"><a href="data-wrangling.html#cb295-3" aria-hidden="true" tabindex="-1"></a>new_dt <span class="ot">&lt;-</span> or_dt   </span>
<span id="cb295-4"><a href="data-wrangling.html#cb295-4" aria-hidden="true" tabindex="-1"></a>new_dt[, ab <span class="sc">:</span><span class="er">=</span> a<span class="sc">*</span>b]</span>
<span id="cb295-5"><a href="data-wrangling.html#cb295-5" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(or_dt)   <span class="co"># or_dt was also affected by changes in new_dt</span></span></code></pre></div>
<pre><code>## [1] &quot;a&quot;  &quot;b&quot;  &quot;ab&quot;</code></pre>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="data-wrangling.html#cb297-1" aria-hidden="true" tabindex="-1"></a>or_dt <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">b =</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">20</span>)</span>
<span id="cb297-2"><a href="data-wrangling.html#cb297-2" aria-hidden="true" tabindex="-1"></a>copy_dt <span class="ot">&lt;-</span> <span class="fu">copy</span>(or_dt)   <span class="co"># By creating a copy, we have 2 objects in memory</span></span>
<span id="cb297-3"><a href="data-wrangling.html#cb297-3" aria-hidden="true" tabindex="-1"></a>copy_dt[, ab <span class="sc">:</span><span class="er">=</span> a<span class="sc">*</span>b]</span>
<span id="cb297-4"><a href="data-wrangling.html#cb297-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(or_dt)    <span class="co"># Changes in the copy don&#39;t affect the original</span></span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot;</code></pre>
</div>
</div>
<div id="summary" class="section level2" number="2.7">
<h2><span class="header-section-number">2.7</span> Summary</h2>
<p>By now, you should be able to answer the following questions:</p>
<ul>
<li>How to subset by rows or columns? Remember: DT[i, j, by].</li>
<li>How to add columns?</li>
<li>How to make operations with different columns?</li>
</ul>
</div>
<div id="data.table-resources" class="section level2" number="2.8">
<h2><span class="header-section-number">2.8</span> Data.table resources</h2>
<p>The help page for <code>data.table</code>.</p>
<p><a href="https://cran.r-project.org/web/packages/data.table/" class="uri">https://cran.r-project.org/web/packages/data.table/</a></p>
<p><a href="https://s3.amazonaws.com/../assets.datacamp.com/img/blog/data+table+cheat+sheet.pdf" class="uri">https://s3.amazonaws.com/../assets.datacamp.com/img/blog/data+table+cheat+sheet.pdf</a></p>
<p><a href="http://r4ds.had.co.nz/relational-data.html" class="uri">http://r4ds.had.co.nz/relational-data.html</a></p>
<p><a href="http://adv-r.had.co.nz/Environments.html" class="uri">http://adv-r.had.co.nz/Environments.html</a></p>
<div style="page-break-after: always;"></div>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="2">
<li id="fn2"><p><a href="https://en.wikipedia.org/wiki/Iris_flower_data_set" class="uri">https://en.wikipedia.org/wiki/Iris_flower_data_set</a><a href="data-wrangling.html#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tidy-data-and-combining-tables.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
